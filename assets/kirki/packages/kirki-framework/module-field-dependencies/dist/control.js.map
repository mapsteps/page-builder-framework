{"mappings":"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","sources":["src/control.js"],"sourcesContent":["var kirkiDependencies = {\n\n\tdependantControls: {},\n\n\tinit: function() {\n\t\tvar self = this;\n\n\t\t_.each( window.kirkiControlDependencies, function( requires, controlID ) {\n\t\t\tvar control = wp.customize.control( controlID );\n\n\t\t\tif ( control ) {\n\t\t\t\trequires.forEach( function( require, requireIndex ) {\n\t\t\t\t\trequires[requireIndex].settingLink = self.getSettingLink(require.setting);\n\t\t\t\t});\n\n\t\t\t\twp.customize.control(controlID).params.required = requires;\n\t\t\t\tself.showKirkiControl( control );\n\t\t\t}\n\t\t} );\n\n\t\t_.each( self.dependantControls, function( data, dependantSetting ) {\n\t\t\t_.each( data.dependencies, function( dependency ) {\n\t\t\t\twp.customize( data.settingLink, function( setting ) {\n\t\t\t\t\tvar setupControl = function( control ) {\n\t\t\t\t\t\tvar setActiveState;\n\t\t\t\t\t\tvar isDisplayed;\n\n\t\t\t\t\t\tisDisplayed = function() {\n\t\t\t\t\t\t\treturn self.showKirkiControl( wp.customize.control( dependency ) );\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tsetActiveState = function() {\n\t\t\t\t\t\t\tcontrol.active.set( isDisplayed() );\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tsetActiveState();\n\t\t\t\t\t\tsetting.bind( setActiveState );\n\n\t\t\t\t\t\tcontrol.active.validate = isDisplayed;\n\t\t\t\t\t};\n\n\t\t\t\t\twp.customize.control( dependency, setupControl );\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\t},\n\n\t/**\n\t * Get the actual customize setting link of a control.\n\t *\n\t * @since 1.0.3\n\t * @param {string} controlID The ID of the control.\n\t * @return {string} The setting link.\n\t */\n\tgetSettingLink: function( controlID ) {\n\t\tvar control = document.querySelector(\n\t\t\t'[data-kirki-setting=\"' + controlID + '\"]'\n\t\t);\n\t\tvar setting = controlID;\n\n\t\tif (control) {\n\t\t\tif (controlID !== control.dataset.kirkiSettingLink) {\n\t\t\t\tsetting = control.dataset.kirkiSettingLink;\n\t\t\t}\n\t\t}\n\n\t\treturn setting;\n\t},\n\n\t/**\n\t * Should we show the control?\n\t *\n\t * @since 3.0.17\n\t * @param {string|object} control - The control-id or the control object.\n\t * @returns {bool} - Whether the control should be shown or not.\n\t */\n\tshowKirkiControl: function( control ) {\n\t\tconst self = this;\n\t\tlet show   = true;\n\n\t\tlet i;\n\n\t\tif ( _.isString( control ) ) {\n\t\t\tcontrol = wp.customize.control( control );\n\t\t}\n\n\t\t// Exit early if control not found or if \"required\" argument is not defined.\n\t\tif ( 'undefined' === typeof control || ( control.params && _.isEmpty( control.params.required ) ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Loop control requirements.\n\t\tfor ( i = 0; i < control.params.required.length; i++ ) {\n\t\t\tif ( ! self.checkCondition( control.params.required[ i ], control, 'AND' ) ) {\n\t\t\t\tshow = false;\n\t\t\t}\n\t\t}\n\n\t\treturn show;\n\t},\n\n\t/**\n\t * Check a condition.\n\t *\n\t * @param {Object} requirement - The requirement, inherited from showKirkiControl.\n\t * @param {Object} control - The control object.\n\t * @param {string} relation - Can be one of 'AND' or 'OR'.\n\t * @returns {bool} - Returns the results of the condition checks.\n\t */\n\tcheckCondition: function( requirement, control, relation ) {\n\t\tlet self = this;\n\t\tlet childRelation = \"AND\" === relation ? \"OR\" : \"AND\";\n\t\tlet nestedItems;\n\t\tlet value;\n\t\tlet i;\n\n\t\t// If an array of other requirements nested, we need to process them separately.\n\t\tif (\n\t\t\t\"undefined\" !== typeof requirement[0] &&\n\t\t\t\"undefined\" === typeof requirement.setting\n\t\t) {\n\t\t\tnestedItems = [];\n\n\t\t\t// Loop sub-requirements.\n\t\t\tfor (i = 0; i < requirement.length; i++) {\n\t\t\t\tnestedItems.push(\n\t\t\t\t\tself.checkCondition(requirement[i], control, childRelation)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// OR relation. Check that true is part of the array.\n\t\t\tif (\"OR\" === childRelation) {\n\t\t\t\treturn -1 !== nestedItems.indexOf(true);\n\t\t\t}\n\n\t\t\t// AND relation. Check that false is not part of the array.\n\t\t\treturn -1 === nestedItems.indexOf(false);\n\t\t}\n\n\t\tif (\"kirki_demo_options[kirki_demo_switch]\" === requirement.setting) {\n\t\t\tconsole.log(control);\n\t\t}\n\n\t\tif (\"undefined\" === typeof wp.customize.control(requirement.setting)) {\n\t\t\t// Early exit if setting is not defined.\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( ! self.dependantControls[requirement.setting] ) {\n\t\t\tself.dependantControls[requirement.setting] = {\n\t\t\t\tsettingLink: requirement.settingLink,\n\t\t\t\tdependencies: []\n\t\t\t};\n\t\t}\n\n\t\tif ( ! self.dependantControls[requirement.setting].dependencies.includes(control.id) ) {\n      self.dependantControls[requirement.setting].dependencies.push(control.id);\n    }\n\n\t\tvalue = wp.customize(requirement.settingLink).get();\n\n\t\tif (wp.customize.control(requirement.setting).setting) {\n\t\t\tvalue = wp.customize.control(requirement.setting).setting._value;\n\t\t}\n\n\t\treturn self.evaluate(\n\t\t\trequirement.value,\n\t\t\tvalue,\n\t\t\trequirement.operator,\n\t\t\trequirement.choice\n\t\t);\n\t},\n\n\t/**\n\t * Figure out if the 2 values have the relation we want.\n\t *\n\t * @since 3.0.17\n\t * @param {mixed} value1 - The 1st value.\n\t * @param {mixed} value2 - The 2nd value.\n\t * @param {string} operator - The comparison to use.\n\t * @param {string} choice - If we want to check an item in an object value.\n\t * @returns {bool} - Returns the evaluation result.\n\t */\n\tevaluate: function( value1, value2, operator, choice ) {\n\t\tvar found = false;\n\n\t\tif ( choice && 'object' === typeof value2 ) {\n\t\t\tvalue2 = value2[ choice ];\n\t\t}\n\n\t\tif ( '===' === operator ) {\n\t\t\treturn value1 === value2;\n\t\t}\n\n\t\tif ( '==' === operator || '=' === operator || 'equals' === operator || 'equal' === operator ) {\n\t\t\treturn value1 == value2;\n\t\t}\n\n\t\tif ( '!==' === operator ) {\n\t\t\treturn value1 !== value2;\n\t\t}\n\n\t\tif ( '!=' === operator || 'not equal' === operator ) {\n\t\t\treturn value1 != value2;\n\t\t}\n\n\t\tif ( '>=' === operator || 'greater or equal' === operator || 'equal or greater' === operator ) {\n\t\t\treturn value2 >= value1;\n\t\t}\n\n\t\tif ( '<=' === operator || 'smaller or equal' === operator || 'equal or smaller' === operator ) {\n\t\t\treturn value2 <= value1;\n\t\t}\n\n\t\tif ( '>' === operator || 'greater' === operator ) {\n\t\t\treturn value2 > value1;\n\t\t}\n\n\t\tif ( '<' === operator || 'smaller' === operator ) {\n\t\t\treturn value2 < value1;\n\t\t}\n\n\t\tif ( 'contains' === operator || 'in' === operator ) {\n\t\t\tif ( _.isArray( value1 ) && _.isArray( value2 ) ) {\n\t\t\t\t_.each( value2, function( value ) {\n\t\t\t\t\tif ( value1.includes( value ) ) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\treturn found;\n\t\t\t}\n\n\t\t\tif ( _.isArray( value2 ) ) {\n\t\t\t\t_.each( value2, function( value ) {\n\t\t\t\t\tif ( value == value1 ) { // jshint ignore:line\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn found;\n\t\t\t}\n\n\t\t\tif ( _.isObject( value2 ) ) {\n\t\t\t\tif ( ! _.isUndefined( value2[ value1 ] ) ) {\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t\t_.each( value2, function( subValue ) {\n\t\t\t\t\tif ( value1 === subValue ) {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn found;\n\t\t\t}\n\n\t\t\tif ( _.isString( value2 ) ) {\n\t\t\t\tif ( _.isString( value1 ) ) {\n\t\t\t\t\treturn ( -1 < value1.indexOf( value2 ) && -1 < value2.indexOf( value1 ) );\n\t\t\t\t}\n\t\t\t\treturn -1 < value1.indexOf( value2 );\n\t\t\t}\n\t\t}\n\n\t\tif ( 'does not contain' === operator || 'not in' === operator ) {\n\t\t\treturn ( ! this.evaluate( value1, value2, 'contains', choice ) );\n\t\t}\n\n\t\treturn value1 == value2;\n\t}\n};\n\njQuery( document ).ready( function() {\n\tkirkiDependencies.init();\n} );\n"],"names":["$1abc80d3e2df1201$var$kirkiDependencies","dependantControls","init","self","this","_","each","window","kirkiControlDependencies","requires","controlID","control","wp","customize","forEach","require","requireIndex","settingLink","getSettingLink","setting","params","required","showKirkiControl","data","dependantSetting","dependencies","dependency","setActiveState","isDisplayed","active","set","bind","validate","document","querySelector","dataset","kirkiSettingLink","i","show","isString","isEmpty","length","checkCondition","requirement","relation","nestedItems","value","childRelation","push","indexOf","console","log","includes","id","get","_value","evaluate","operator","choice","value1","value2","found","isArray","isObject","isUndefined","subValue","jQuery","ready"],"version":3,"file":"control.js.map"}