{"mappings":"6DAAO,MAAMA,EAAa,CACzBC,EACAC,EACAC,KAEA,GAAIF,EAAGG,QAAQF,GACd,OAAOD,EAGR,GAAmB,SAAfA,EAAGI,SAAqC,SAAfJ,EAAGI,QAC/B,OAGD,IAAIC,EACJH,EAAQA,GAAgB,GAExB,IAAK,IAAII,EAAI,EAAGA,EAAIJ,EAAOI,IAAK,CAC/B,MAAMC,EAAaP,EAAGO,WAEtB,IACEA,GACsB,SAAvBA,EAAWH,SACY,SAAvBG,EAAWH,QAEX,MAGD,GAAIG,EAAWJ,QAAQF,GACtB,OAAOM,EAGRP,EAAKO,CACN,CAEA,OAAOF,CAAA,E,MClCRG,EAAeC,OCKd,WASA,SAASC,EAAQC,GAChB,MAAMC,EAASb,EAAWc,KAAM,0BAChC,IAAKD,EAAQ,OACb,IAAIE,EAAQF,EAAOG,QAAQC,aAC3BF,EAAQA,GAAgB,GAExBG,EAAAT,GACEU,KAAK,CACLC,IAAKC,QACLC,KAAM,OACNC,KAAM,CACLC,OAAQ,gCACRT,MAAOA,EACPJ,QAAS,KAGVc,QAAO,SAAUC,GACbA,EAAEC,SAASC,QAAQC,IAAIH,EAAEH,KAC9B,GACF,CA1BCL,EAAAT,EAAA,CAAOqB,UAAUC,GAChB,QACA,wDACApB,EA0BH,CA/BC,E","sources":["packages/settings/src/utils.ts","jQuery.js","packages/settings/src/discount-notice.ts"],"sourcesContent":["export const getClosest = (\r\n\tel: HTMLElement,\r\n\tselector: string,\r\n\tdepth?: number\r\n): HTMLElement | undefined => {\r\n\tif (el.matches(selector)) {\r\n\t\treturn el;\r\n\t}\r\n\r\n\tif (el.tagName === \"BODY\" || el.tagName === \"HTML\") {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tlet closest = undefined;\r\n\tdepth = depth ? depth : 20;\r\n\r\n\tfor (let i = 0; i < depth; i++) {\r\n\t\tconst parentNode = el.parentNode as HTMLElement;\r\n\r\n\t\tif (\r\n\t\t\t!parentNode ||\r\n\t\t\tparentNode.tagName === \"BODY\" ||\r\n\t\t\tparentNode.tagName === \"HTML\"\r\n\t\t) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (parentNode.matches(selector)) {\r\n\t\t\treturn parentNode;\r\n\t\t}\r\n\r\n\t\tel = parentNode;\r\n\t}\r\n\r\n\treturn closest;\r\n};\r\n\r\nexport const startLoading = (button: HTMLButtonElement | HTMLElement) => {\r\n\tbutton.classList.add(\"is-loading\");\r\n};\r\n\r\nexport const stopLoading = (button: HTMLButtonElement | HTMLElement) => {\r\n\tbutton.classList.remove(\"is-loading\");\r\n};\r\n","module.exports=jQuery;","import { getClosest } from \"./utils\";\r\nimport jQuery from \"jquery\";\r\n\r\ndeclare var ajaxurl: string;\r\n\r\n(function () {\r\n\tfunction init() {\r\n\t\tjQuery(document).on(\r\n\t\t\t\"click\",\r\n\t\t\t\".kirki-discount-notice.is-dismissible .notice-dismiss\",\r\n\t\t\tdismiss\r\n\t\t);\r\n\t}\r\n\r\n\tfunction dismiss(e: JQuery.ClickEvent) {\r\n\t\tconst notice = getClosest(this, \".kirki-discount-notice\");\r\n\t\tif (!notice) return;\r\n\t\tlet nonce = notice.dataset.dismissNonce;\r\n\t\tnonce = nonce ? nonce : \"\";\r\n\r\n\t\tjQuery\r\n\t\t\t.ajax({\r\n\t\t\t\turl: ajaxurl,\r\n\t\t\t\ttype: \"post\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\taction: \"kirki_dismiss_discount_notice\",\r\n\t\t\t\t\tnonce: nonce,\r\n\t\t\t\t\tdismiss: 1,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t.always(function (r) {\r\n\t\t\t\tif (r.success) console.log(r.data);\r\n\t\t\t});\r\n\t}\r\n\r\n\tinit();\r\n})();\r\n"],"names":["$8f87dbd6e216f0fb$export$211731fc355e9121","el","selector","depth","matches","tagName","closest","i","parentNode","$0a2eb9defebd2c69$exports","jQuery","dismiss","e","notice","this","nonce","dataset","dismissNonce","$parcel$interopDefault","ajax","url","ajaxurl","type","data","action","always","r","success","console","log","document","on"],"version":3,"file":"discount-notice.js.map"}