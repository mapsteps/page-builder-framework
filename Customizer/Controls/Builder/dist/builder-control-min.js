!function(){function e(e){try{return JSON.stringify(e)}catch(e){return""}}let t=wp.customize.controlConstructor["wpbf-header-builder"]=wp.customize.wpbfDynamicControl.extend({form:void 0,valueField:void 0,availableWidgetsPanel:void 0,builderPanel:void 0,sortables:void 0,initWpbfControl:function(e){if(!(e=e||this)||"wpbf-header-builder"!==e.params.type)return;let t=document.querySelector(`#_customize-input-${e.id} .wpbf-control-form`);t instanceof HTMLElement&&(e.form=t),e.setting?.bind(t=>{e.updateComponentState?.(t)}),e.valueField=e.form?.querySelector("textarea"),e.valueField?.addEventListener("change",function(){if(!e.setting)return;let t=function(e){if(""!==e&&e)try{return JSON.parse(e)}catch(e){return}}(this.value);t&&e.setting.set(t)}),e.buildPanels?.(),e.initSortables?.()},buildPanels:function(){this.buildAvailableWidgetsPanel?.(),this.buildBuilderPanel?.()},buildAvailableWidgetsPanel:function(){let e=this.params;if(!e)return;let t=document.querySelector(`#_customize-input-${this.id} .available-widgets-panel`);if(!(t instanceof HTMLElement))return;this.availableWidgetsPanel=t;let i=e.headerBuilder.availableWidgets,l={};for(let t in e.value)e.value.hasOwnProperty(t)&&(l[t]=e.value[t]);let a=jQuery("<ul>").addClass("available-widgets").appendTo(this.availableWidgetsPanel);for(let e in i)i.hasOwnProperty(e)&&jQuery("<li>").addClass(`widget-item widget-item-${e} ${l[e]?"":"disabled"}`).attr("data-widget-key",e).html(`<span class="widget-label">${i[e]}</span>`).appendTo(a)},buildBuilderPanel:function(){let e=this.params;if(!e)return;let t=e.headerBuilder.availableRows,i=e.headerBuilder.availableWidgets;if(!t||!i)return;let l=document.querySelector("#customize-preview");if(!(l instanceof HTMLElement))return;let a=jQuery("<div>").addClass("header-builder-panel").insertAfter(l);for(let l in t){if(!t.hasOwnProperty(l))continue;let r=jQuery("<div>").addClass(`builder-row builder-row-${l}`).attr("data-row-key",l).appendTo(a),n=jQuery("ul").addClass("builder-row-widgets").appendTo(r),d=e.value[l];if(d)for(let t in d)d.hasOwnProperty(t)&&jQuery("<li>").addClass(`widget-item widget-item-${t} ${e.value[t]?"":"disabled"}`).attr("data-widget-key",t).html(`<button type="button">${i[t]}</button>`).appendTo(n)}this.builderPanel=a[0]},initSortables:function(){if(!this.params||!this.availableWidgetsPanel||!this.builderPanel||!this.availableWidgetsPanel.querySelector("ul.available-widgets")||!this.builderPanel.querySelectorAll("ul.builder-row-widgets").length)return},updateComponentState:function(t){let i=this.form?.querySelector("textarea");i&&(i.value=e(t))},valuesEqual:function(t,i){return e(t)===e(i)}});wp.customize.controlConstructor["wpbf-header-builder"]=t}();
//# sourceMappingURL=builder-control-min.js.map
