!function(){function e(e){try{return JSON.stringify(e)}catch(e){return""}}let t=wp.customize.controlConstructor["wpbf-header-builder"]=wp.customize.wpbfDynamicControl.extend({form:void 0,valueField:void 0,availableWidgetsPanel:void 0,builderPanel:void 0,sortables:void 0,initWpbfControl:function(e){if(!(e=e||this)||"wpbf-header-builder"!==e.params.type)return;let t=document.querySelector(`#_customize-input-${e.id} .wpbf-control-form`);t instanceof HTMLElement&&(e.form=t),e.setting?.bind(t=>{e.updateComponentState?.(t)}),e.valueField=e.form?.querySelector("textarea"),e.valueField?.addEventListener("change",function(){if(!e.setting)return;let t=function(e){if(""!==e&&e)try{return JSON.parse(e)}catch(e){return}}(this.value);t&&e.setting.set(t)}),e.buildAvailableWidgetsPanel?.(),e.buildBuilderPanel?.(),window.setTimeout(()=>{e.initSortable?.()},3e3)},buildAvailableWidgetsPanel:function(){if(!this.container)return;let e=this.params;if(!e)return;let t=this.container[0].querySelector(".available-widgets-panel");if(!(t instanceof HTMLElement))return;this.availableWidgetsPanel=t;let i=e.headerBuilder.availableWidgets,a={};for(let t in e.value)e.value.hasOwnProperty(t)&&(a[t]=e.value[t]);let l=jQuery("<div></div>").addClass("available-widgets sortable-widgets").appendTo(this.availableWidgetsPanel);for(let e in i)i.hasOwnProperty(e)&&jQuery("<button></button>").addClass(`widget-item widget-item-${e} ${a[e]?"disabled":""}`).attr("type","button").attr("data-widget-key",e).html(`<span class="widget-label">${i[e]}</span>
					<i class="dashicons dashicons-move"></i>`).appendTo(l)},buildBuilderPanel:function(){let e=this.params;if(!e)return;let t=e.headerBuilder.availableRows,i=e.headerBuilder.availableWidgets;if(!t||!i)return;let a=document.querySelector("#customize-preview");if(!(a instanceof HTMLElement))return;let l=jQuery("<div></div>").addClass("header-builder-panel").insertAfter(a);for(let a in t){if(!t.hasOwnProperty(a))continue;let r=jQuery("<div></div>").addClass(`builder-row builder-${a}`).attr("data-row-key",a).appendTo(l),n=jQuery("<div></div>").addClass(`builder-widgets builder-widgets-${a} sortable-widgets`).appendTo(r),o=e.value[a];if(o)for(let e in o)o.hasOwnProperty(e)&&jQuery("<button></button>").addClass(`widget-item widget-item-${e}`).attr("type","button").attr("data-widget-key",e).html(`<span class="widget-label">${i[e]}</span>
						<i class="dashicons dashicons-move"></i>`).appendTo(n)}this.builderPanel=l[0]},initSortable:function(){let e=this.params;if(!e||!this.availableWidgetsPanel||!this.builderPanel)return;let t="#customize-control-"+e.id;jQuery(t+" .available-widgets, "+t+" .builder-widgets").sortable({connectWith:".sortable-widgets",start:function(e,t){console.log("ui object on sortable start",t)},update:function(e,t){console.log("ui object on sortable update",t)}}),jQuery(t+" .available-widgets").on("sortcreate",function(e,t){console.log("ui object on sortcreate",t)}),jQuery(t+" .builder-widgets").on("sortstop",function(e,t){console.log("ui object on sortstop",t)})},destroySortable:function(){this.availableWidgetsPanel&&this.builderPanel&&jQuery(".available-widgets, .builder-widgets").sortable("destroy")},updateComponentState:function(t){let i=this.form?.querySelector("textarea");i&&(i.value=e(t))},valuesEqual:function(t,i){return e(t)===e(i)}});wp.customize.controlConstructor["wpbf-header-builder"]=t}();
//# sourceMappingURL=builder-control-min.js.map
