var __defProp=Object.defineProperty,__defNormalProp=(t,e,n)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__publicField=(t,e,n)=>__defNormalProp(t,"symbol"!=typeof e?e+"":e,n);!function(t,e,n,i,o){"use strict";function r(t,e,n){switch(e=e.trim().toLowerCase()){case"==":return t==n;case"===":return t===n;case"!=":return t!=n;case"!==":return t!==n;case">":return t>n;case">=":return t>=n;case"<":return t<n;case"<=":return t<=n;case"in":return s(t,n);case"not in":return!s(t,n)}return!1}function s(e,n){if(Array.isArray(n)){const t=n;let i=!1;if(Array.isArray(e)){const n=e;for(let e=0;e<n.length;++e)if(t.includes(n[e])){i=!0;break}}else t.includes(e)&&(i=!0);return i}if(Array.isArray(e)){return e.includes(n)}if(t.isObject(e)){const i=e;if(!t.isUndefined(i[n]))return!0;for(const t in i)if(i.hasOwnProperty(t)&&i[t]===n)return!0}return"string"==typeof e&&("string"==typeof n?-1<n.indexOf(e)&&-1<e.indexOf(n):-1<n.indexOf(e))}function a(e){t.each(wpbfCustomizerTooltips,function(t){if(t.id!==e.id)return;if(e.container.find(".tooltip-content").length)return;const n=document.querySelector("#customize-control-"+t.id+" .customize-control-title");if(!n)return;n.classList.add("wpbf-tooltip-wrapper");const i=document.createElement("span");i.classList.add("tooltip-trigger"),i.innerHTML='<span class="dashicons dashicons-editor-help"></span>';const o=document.createElement("span");o.classList.add("tooltip-content"),o.innerHTML=t.content,n.appendChild(i),n.appendChild(o)})}var c;function l(t,e){if(!(t instanceof NodeList||Array.isArray(t)||"string"==typeof t))return;if("function"!=typeof e)return;const n=t instanceof NodeList||Array.isArray(t)?t:document.querySelectorAll(t);if(n.length)for(let i=0;i<n.length;i++){const t=n[i];t instanceof HTMLElement&&e(t)}}function d(t){l(".wpbf-device-buttons .wpbf-device-button",function(e){e instanceof HTMLButtonElement&&(t===e.dataset.wpbfDevice?e.classList.add("is-active"):e.classList.remove("is-active"))}),l(".wpbf-control-device",function(e){e instanceof HTMLButtonElement&&(t===e.dataset.wpbfDevice?e.classList.add("is-active"):e.classList.remove("is-active"))}),l(".responsive-control",function(e){if(!(e instanceof HTMLButtonElement))return;const n=`${e.dataset.wpbfSetting??""}-${t}`,i=e.querySelector("label.customize-control-label");i&&i instanceof HTMLLabelElement&&(i.htmlFor=n)})}(c=window.wp.customize)&&(c.wpbfDynamicControl=c.Control.extend({initialize:function(e,n){const i=this;n.type||(n.type="wpbf-generic");let o="";if(n.content){let t=n.content.split('class="');t=t[1].split('"'),o=t[0]}else o="customize-control customize-control-"+n.type;if(n.content){const i=jQuery(n.content);i.attr("id","customize-control-"+e.replace(/]/g,"").replace(/\[/g,"-")),i.attr("class",o);const r=n.wrapperAttrs??{};t.each(r,function(t,e){"class"===e&&(t=t.replace("{default_class}",o)),i.attr(e,t)}),n.content=i.prop("outerHTML")}i.propertyElements=[],c.Control.prototype.initialize.call(i,e,n),window.wp.hooks.doAction("wpbf.dynamicControl.init.after",e,i,n)},_setUpSettingRootLinks:function(){const t=this;t.container.find("[data-customize-setting-link]").each(function(e,n){const i=jQuery(this),o=this.dataset.customizeSettingLink;o&&c(o,function(e){const n=new c.Element(i);t.elements.push(n),n.sync(e),n.set(e())})})},_setUpSettingPropertyLinks:function(){const e=this;let n;e.setting&&(n=e.container.find("[data-customize-setting-property-link]"),n.each(function(){const n=jQuery(this);let i,o=n.data("customizeSettingPropertyLink");i=new c.Element(n),e.propertyElements.push(i),e.setting&&"function"==typeof e.setting&&(i.set(e.setting()[o]),i.bind(function(n){if(!e.setting||"function"!=typeof e.setting)return;let i=e.setting();n!==i[o]&&(i=t.clone(i),i[o]=n,e.setting.set(i))}),e.setting.bind(function(t){t[o]!==i.get()&&i.set(t[o])}))}))},ready:function(){this._setUpSettingRootLinks?.(),this._setUpSettingPropertyLinks?.(),c.Control.prototype.ready.call(this),this.deferred?.embedded.done(()=>{this.initWpbfControl?.(),window.wp.hooks.doAction("wpbf.dynamicControl.ready.deferred.embedded.done",this)}),window.wp.hooks.doAction("wpbf.dynamicControl.ready.after",this)},embed:function(){let t=this.section?.();t&&(c.section(t,t=>{"wpbf-expanded"===t.params.type||t.expanded()||c.settings.autofocus.control===this.id?this.actuallyEmbed?.():t.expanded.bind(t=>{t&&this.actuallyEmbed?.()})}),window.wp.hooks.doAction("wpbf.dynamicControl.embed.after",this))},actuallyEmbed:function(){"resolved"!==this.deferred?.embedded?.state()&&(this.renderContent?.(),this.deferred?.embedded.resolve(),window.wp.hooks.doAction("wpbf.dynamicControl.actuallyEmbed.after",this))},focus:function(t){this.actuallyEmbed?.(),c.Control.prototype.focus.call(this,t),window.wp.hooks.doAction("wpbf.dynamicControl.focus.after",this)},initWpbfControl:function(t){window.wp.hooks.doAction("wpbf.dynamicControl.initWpbfControl",this);const e=this;this.container?.on("change input paste click","input",function(){e.setting?.set(this.value)})},destroy:function(){this.container?.off("change input paste click","input")},updateCustomizerSetting:function(t){this.setting?.set(t)},findHtmlEl:function(t,e){if(!t)return;if("string"==typeof t){const e=document.querySelector(t);return e instanceof HTMLElement?e:void 0}if(!e)return;const n=t.querySelector(e);return n instanceof HTMLElement?n:void 0},findHtmlEls:function(t,e){if(!t)return[];if("string"==typeof t){const e=document.querySelectorAll(t);return Array.from(e).filter(t=>t instanceof HTMLElement)}if(!e)return[];const n=t.querySelectorAll(e);return Array.from(n).filter(t=>t instanceof HTMLElement)}}),c.bind("ready",()=>{!function(t){let e=[];t.control.each(function(n){e.includes(n.section())||e.push(n.section()),t.section(n.section(),function(e){e.expanded()||t.settings.autofocus.control===n.id?a(n):e.expanded.bind(function(t){t&&a(n)})})});const n=document.createElement("style"),i=document.querySelector(".wp-full-overlay-sidebar-content");n.classList.add("wpbf-tooltip-inline-styles"),document.head.appendChild(n),e.forEach(function(e){i&&t.section(e,function(t){t.expanded.bind(function(e){e&&(t.contentContainer&&t.contentContainer[0].scrollHeight>i.clientHeight?n.innerHTML=".wpbf-tooltip-wrapper span.tooltip-content {min-width: 258px;}":n.innerHTML="")})})})}(c)}),window.wpbfCustomizerControlDependencies&&function(t){if(!window.wp.customize)return;const e={};for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r];for(const t of n){let n=t.setting;!n&&t.id&&(n=t.id),n&&(e[n]||(e[n]=[]),e[n].push({dependantControlId:r,operator:t.operator,value:t.value}))}}const n=window.wp.customize;function i(t){n(t,function(n){const i=e[t];o(t,n.get(),i),n.bind(function(e){o(t,e,i)})})}function o(e,i,o){for(const c of o){if(!r(i,c.operator,c.value)){s(c.dependantControlId);continue}const o=t[c.dependantControlId];if(o.length<2){a(c.dependantControlId);continue}let l=!0;for(const t of o){let i=t.setting;if(!i&&t.id&&(i=t.id),i&&i!==e&&!r(n(i).get(),t.operator,t.value)){l=!1;break}}l?a(c.dependantControlId):s(c.dependantControlId)}}function s(t){var e;e=n.control(t)?.container[0],e&&e.dataset.wpbfParentTabId&&e.classList.contains("wpbf-tab-item-hidden")&&(n.control(t)?.container.removeClass("wpbf-tab-item-hidden"),n.control(t)?.container.addClass("wpbf-tab-item-invisible")),n.control(t)?.onChangeActive(!1,{completeCallback:()=>{n.control(t)?.container.hasClass("wpbf-tab-item-invisible")&&(n.control(t)?.container.removeClass("wpbf-tab-item-invisible"),n.control(t)?.container.addClass("wpbf-tab-item-hidden"))}})}function a(t){n.control(t)?.onChangeActive(!0,{})}n.bind("ready",function(){for(const t in e)e.hasOwnProperty(t)&&i(t)})}(window.wpbfCustomizerControlDependencies),c.Value.prototype.set=function(e){const n=this._value;return e=this._setter.apply(this,arguments),null===(e=this.validate(e))||t.isEqual(n,e)||(this._value=e,this._dirty=!0,this.callbacks.fireWith(this,[e,n])),this},c.Value.prototype.get=function(){return this._value}),wp.customize.bind("ready",function(){wp.customize.previewedDevice.bind(function(t){d(t)}),jQuery(document).on("click",".wpbf-device-buttons .wpbf-device-button",function(t){const e=this.dataset.wpbfDevice;e&&(d(e),wp.customize.previewedDevice.set(e))})}),(t=>{t&&(t.controlConstructor["wpbf-checkbox"]=t.wpbfDynamicControl.extend({initWpbfControl:function(t){const e=t||this;e.container?.on("change","input",function(){e.setting?.set(jQuery(this).is(":checked"))})}}),t.controlConstructor["wpbf-toggle"]=t.wpbfDynamicControl.extend({initWpbfControl:function(t){const e=t||this;e.container?.on("change","input",function(){e.setting?.set(jQuery(this).is(":checked"))})}}),t.controlConstructor["wpbf-checkbox-buttonset"]=t.wpbfDynamicControl.extend({currentValue:void 0,initWpbfControl:function(t){},ready:function(){const t=this;this.currentValue=this.setting?.get(),this.container?.on("change",".switch-input",e=>{const n=[];if(!t.container)return n;t.container[0].querySelectorAll(".switch-input:checked").forEach(t=>{t instanceof HTMLInputElement&&n.push(t.value)}),t.setting?.set(n)}),this.setting?.bind(e=>{t.updateComponentState?.(e)})},updateComponentState:function(t){if(this.currentValue===t)return;if(!this.container)return;this.container[0].querySelectorAll(".switch-input").forEach(e=>{e instanceof HTMLInputElement&&(e.checked=t.includes(e.value))})}}))})(window.wp.customize);var u={grad:.9,turn:360,rad:360/(2*Math.PI)},p=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},f=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},h=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t>n?n:t>e?t:e},m=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},g=function(t){return{r:h(t.r,0,255),g:h(t.g,0,255),b:h(t.b,0,255),a:h(t.a)}},b=function(t){return{r:f(t.r),g:f(t.g),b:f(t.b),a:f(t.a,3)}},v=/^#([0-9a-f]{3,8})$/i,w=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},y=function(t){var e=t.r,n=t.g,i=t.b,o=t.a,r=Math.max(e,n,i),s=r-Math.min(e,n,i),a=s?r===e?(n-i)/s:r===n?2+(i-e)/s:4+(e-n)/s:0;return{h:60*(a<0?a+6:a),s:r?s/r*100:0,v:r/255*100,a:o}},C=function(t){var e=t.h,n=t.s,i=t.v,o=t.a;e=e/360*6,n/=100,i/=100;var r=Math.floor(e),s=i*(1-n),a=i*(1-(e-r)*n),c=i*(1-(1-e+r)*n),l=r%6;return{r:255*[i,a,s,s,c,i][l],g:255*[c,i,i,a,s,s][l],b:255*[s,s,c,i,i,a][l],a:o}},x=function(t){return{h:m(t.h),s:h(t.s,0,100),l:h(t.l,0,100),a:h(t.a)}},S=function(t){return{h:f(t.h),s:f(t.s),l:f(t.l),a:f(t.a,3)}},k=function(t){return C((n=(e=t).s,{h:e.h,s:(n*=((i=e.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:e.a}));var e,n,i},N=function(t){return{h:(e=y(t)).h,s:(o=(200-(n=e.s))*(i=e.v)/100)>0&&o<200?n*i/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,n,i,o},j=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,z=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,E=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,H=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,L={string:[[function(t){var e=v.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?f(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?f(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=E.exec(t)||H.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:g({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=j.exec(t)||z.exec(t);if(!e)return null;var n,i,o=x({h:(n=e[1],i=e[2],void 0===i&&(i="deg"),Number(n)*(u[i]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)});return k(o)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,i=t.b,o=t.a,r=void 0===o?1:o;return p(e)&&p(n)&&p(i)?g({r:Number(e),g:Number(n),b:Number(i),a:Number(r)}):null},"rgb"],[function(t){var e=t.h,n=t.s,i=t.l,o=t.a,r=void 0===o?1:o;if(!p(e)||!p(n)||!p(i))return null;var s=x({h:Number(e),s:Number(n),l:Number(i),a:Number(r)});return k(s)},"hsl"],[function(t){var e=t.h,n=t.s,i=t.v,o=t.a,r=void 0===o?1:o;if(!p(e)||!p(n)||!p(i))return null;var s,a=(s={h:Number(e),s:Number(n),v:Number(i),a:Number(r)},{h:m(s.h),s:h(s.s,0,100),v:h(s.v,0,100),a:h(s.a)});return C(a)},"hsv"]]},P=function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0](t);if(i)return[i,e[n][1]]}return[null,void 0]},_=function(t,e){var n=N(t);return{h:n.h,s:h(n.s+100*e,0,100),l:n.l,a:n.a}},F=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},R=function(t,e){var n=N(t);return{h:n.h,s:n.s,l:h(n.l+100*e,0,100),a:n.a}},I=function(){function t(t){this.parsed=function(t){return"string"==typeof t?P(t.trim(),L.string):"object"==typeof t&&null!==t?P(t,L.object):[null,void 0]}(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return f(F(this.rgba),2)},t.prototype.isDark=function(){return F(this.rgba)<.5},t.prototype.isLight=function(){return F(this.rgba)>=.5},t.prototype.toHex=function(){return e=(t=b(this.rgba)).r,n=t.g,i=t.b,r=(o=t.a)<1?w(f(255*o)):"","#"+w(e)+w(n)+w(i)+r;var t,e,n,i,o,r},t.prototype.toRgb=function(){return b(this.rgba)},t.prototype.toRgbString=function(){return e=(t=b(this.rgba)).r,n=t.g,i=t.b,(o=t.a)<1?"rgba("+e+", "+n+", "+i+", "+o+")":"rgb("+e+", "+n+", "+i+")";var t,e,n,i,o},t.prototype.toHsl=function(){return S(N(this.rgba))},t.prototype.toHslString=function(){return e=(t=S(N(this.rgba))).h,n=t.s,i=t.l,(o=t.a)<1?"hsla("+e+", "+n+"%, "+i+"%, "+o+")":"hsl("+e+", "+n+"%, "+i+"%)";var t,e,n,i,o},t.prototype.toHsv=function(){return t=y(this.rgba),{h:f(t.h),s:f(t.s),v:f(t.v),a:f(t.a,3)};var t},t.prototype.invert=function(){return M({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},t.prototype.saturate=function(t){return void 0===t&&(t=.1),M(_(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),M(_(this.rgba,-t))},t.prototype.grayscale=function(){return M(_(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),M(R(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),M(R(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){return"number"==typeof t?M({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):f(this.rgba.a,3);var e},t.prototype.hue=function(t){var e=N(this.rgba);return"number"==typeof t?M({h:t,s:e.s,l:e.l,a:e.a}):f(e.h)},t.prototype.isEqual=function(t){return this.toHex()===M(t).toHex()},t}(),M=function(t){return t instanceof I?t:new I(t)};function D(t){const{colors:n,onClick:i}=t;return e.jsx("div",{className:"wpbf-color-swatches"+(n&&n.length<7?" no-stretch":""),children:n.map((t,n)=>{const o="string"==typeof t?t:t&&t.color?t.color:"";return e.jsx("button",{type:"button",className:"wpbf-color-swatch","data-wpbf-color":o,style:{backgroundColor:o},onClick:()=>i(o)},n.toString())})})}function T(t,e){return void 0===t||void 0===e||null===t||null===e?e:Math.max(t,e)}function W(t){return"number"==typeof t||"string"==typeof t&&!isNaN(parseFloat(t))}function $(t){return!!("string"!=typeof t&&"number"!=typeof t||"string"==typeof t&&isNaN(parseFloat(t)))}function O(t,e,n){if(""===t)return"";if($(t))return"";let i="string"==typeof t?parseFloat(t):t;return"number"==typeof e&&i<e&&(i=e),"number"==typeof n&&i>n&&(i=n),i}function A(t){if(""===t||null===t)return{number:"",unit:""};if($(t))return{number:"",unit:""};let e=String(t).trim();const n=-1<e.indexOf("-")?"-":"";e=e.replace(n,"");const i=function(t){if(!t)return"";const e=String(t).match(/[a-z%]+$/i);return e?e[0]:""}(e);let o=i?e.replace(i,""):e;if(o=o.trim(),""===o)return{number:"",unit:i};const r=o.endsWith(".");o=n+o;const s=parseFloat(o);return isNaN(s)?{number:"",unit:i}:{number:s,unit:i,hasTrailingDotBeforeUnit:!(!i||!r)}}function Q(t,e,n){const i=A(t);if(""===i.number)return i;return{number:O(i.number,e,n),unit:i.unit,hasTrailingDotBeforeUnit:i.hasTrailingDotBeforeUnit}}function U(t,e,n){if(""===t)return"";if($(t))return"";const i=A(t),o=i.number,r=i.unit;if(""===o)return"";const s=O(o,e,n);return r?`${s}${r}`:s}const B="data:image/webp;base64,UklGRjIAAABXRUJQVlA4TCUAAAAvE8AEAA9w7/97/9/7f/7jAYraNmI6AJQ/1xvvMojof2BSvVEBAA==";function V(t){let e=0;return e=W(t)?Number(t):"object"==typeof t&&"h"in t?t.h:"number"!=typeof t?M(t).toHsl().h:0,e=e<0?0:e,e>360?360:e}function q(t){const e=V(t);return M({h:e,s:100,l:50}).toHex()}function K(t){const{onChange:i,pickerComponent:o,useHueMode:r}=t,[s,a]=n.useState(()=>t.color);n.useEffect(()=>{a(t.color)},[t.color]);const c=n.useCallback(t=>{const e=t.target;let n=e?.value??"";2===n.length?n.includes("#")||n.includes("rg")||n.includes("hs")||(n="#"+n):3!==n.length&&6!==n.length||n.includes("#")||n.includes("rg")||n.includes("hs")||(n="#"+n),n=n.toLowerCase();const o=new RegExp(/(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})\b|(?:rgb|hsl)a?\([^)]*\)/);(""===n||o.test(n))&&i(n),a(n)},[i]),l=["RgbaColorPicker","RgbaStringColorPicker","HslaColorPicker","HslaStringColorPicker","HsvaColorPicker","HsvaStringColorPicker"].includes(o)?`url("${B}")`:"none";return e.jsx("div",{className:"wpbf-color-input-wrapper",children:e.jsxs("div",{className:"wpbf-color-input-control",children:[!r&&e.jsx("div",{className:"wpbf-color-preview-wrapper",style:{backgroundImage:l},children:e.jsx("button",{type:"button",className:"wpbf-color-preview",style:{backgroundColor:r||"number"==typeof s?"transparent":s??"transparent"}})}),e.jsx("input",{type:"text",value:s??"",className:"wpbf-color-input",spellCheck:"false",onChange:c})]})})}function J(t,e){n.useEffect(()=>{const n=n=>{t.current&&(t.current.contains(n.target)||e())};return document.addEventListener("focus",n,!0),()=>{document.removeEventListener("focus",n,!0)}},[t,e])}function G(t,e,i){n.useEffect(()=>{let n=!1,o=!1;const r=r=>{n&&!o&&e.current&&!e.current.contains(r.target)&&t.current&&!t.current.contains(r.target)&&i()},s=i=>{n=e.current&&t.current,o=e.current&&e.current.contains(i.target)||t.current&&t.current.contains(i.target)};return document.addEventListener("mousedown",s),document.addEventListener("touchstart",s),document.addEventListener("click",r),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s),document.removeEventListener("click",r)}},[e,t,i])}function X(){return(X=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function Y(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)e.indexOf(n=r[i])>=0||(o[n]=t[n]);return o}function Z(t){var e=n.useRef(t),i=n.useRef(function(t){e.current&&e.current(t)});return e.current=t,i.current}var tt=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t>n?n:t<e?e:t},et=function(t){return"touches"in t},nt=function(t){return t&&t.ownerDocument.defaultView||self},it=function(t,e,n){var i=t.getBoundingClientRect(),o=et(e)?function(t,e){for(var n=0;n<t.length;n++)if(t[n].identifier===e)return t[n];return t[0]}(e.touches,n):e;return{left:tt((o.pageX-(i.left+nt(t).pageXOffset))/i.width),top:tt((o.pageY-(i.top+nt(t).pageYOffset))/i.height)}},ot=function(t){!et(t)&&t.preventDefault()},rt=n.memo(function(t){var e=t.onMove,i=t.onKey,o=Y(t,["onMove","onKey"]),r=n.useRef(null),s=Z(e),a=Z(i),c=n.useRef(null),l=n.useRef(!1),d=n.useMemo(function(){var t=function(t){ot(t),(et(t)?t.touches.length>0:t.buttons>0)&&r.current?s(it(r.current,t,c.current)):n(!1)},e=function(){return n(!1)};function n(n){var i=l.current,o=nt(r.current),s=n?o.addEventListener:o.removeEventListener;s(i?"touchmove":"mousemove",t),s(i?"touchend":"mouseup",e)}return[function(t){var e,i=t.nativeEvent,o=r.current;if(o&&(ot(i),e=i,(!l.current||et(e))&&o)){if(et(i)){l.current=!0;var a=i.changedTouches||[];a.length&&(c.current=a[0].identifier)}o.focus(),s(it(o,i,c.current)),n(!0)}},function(t){var e=t.which||t.keyCode;e<37||e>40||(t.preventDefault(),a({left:39===e?.05:37===e?-.05:0,top:40===e?.05:38===e?-.05:0}))},n]},[a,s]),u=d[0],p=d[1],f=d[2];return n.useEffect(function(){return f},[f]),n.createElement("div",X({},o,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:r,onKeyDown:p,tabIndex:0,role:"slider"}))}),st=function(t){return t.filter(Boolean).join(" ")},at=function(t){var e=t.color,i=t.left,o=t.top,r=void 0===o?.5:o,s=st(["react-colorful__pointer",t.className]);return n.createElement("div",{className:s,style:{top:100*r+"%",left:100*i+"%"}},n.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},ct=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=Math.pow(10,e)),Math.round(n*t)/n},lt={grad:.9,turn:360,rad:360/(2*Math.PI)},dt=function(t){return"#"===t[0]&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?ct(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:8===t.length?ct(parseInt(t.substring(6,8),16)/255,2):1}},ut=function(t,e){return void 0===e&&(e="deg"),Number(t)*(lt[e]||1)},pt=function(t){var e=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?ht({h:ut(e[1],e[2]),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)}):{h:0,s:0,v:0,a:1}},ft=pt,ht=function(t){var e=t.s,n=t.l;return{h:t.h,s:(e*=(n<50?n:100-n)/100)>0?2*e/(n+e)*100:0,v:n+e,a:t.a}},mt=function(t){var e=t.s,n=t.v,i=t.a,o=(200-e)*n/100;return{h:ct(t.h),s:ct(o>0&&o<200?e*n/100/(o<=100?o:200-o)*100:0),l:ct(o/2),a:ct(i,2)}},gt=function(t){var e=mt(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},bt=function(t){var e=mt(t);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},vt=function(t){var e=t.h,n=t.s,i=t.v,o=t.a;e=e/360*6,n/=100,i/=100;var r=Math.floor(e),s=i*(1-n),a=i*(1-(e-r)*n),c=i*(1-(1-e+r)*n),l=r%6;return{r:ct(255*[i,a,s,s,c,i][l]),g:ct(255*[c,i,i,a,s,s][l]),b:ct(255*[s,s,c,i,i,a][l]),a:ct(o,2)}},wt=function(t){var e=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?jt({h:ut(e[1],e[2]),s:Number(e[3]),v:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)}):{h:0,s:0,v:0,a:1}},yt=wt,Ct=function(t){var e=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?Nt({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):{h:0,s:0,v:0,a:1}},xt=Ct,St=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},kt=function(t){var e=t.r,n=t.g,i=t.b,o=t.a,r=o<1?St(ct(255*o)):"";return"#"+St(e)+St(n)+St(i)+r},Nt=function(t){var e=t.r,n=t.g,i=t.b,o=t.a,r=Math.max(e,n,i),s=r-Math.min(e,n,i),a=s?r===e?(n-i)/s:r===n?2+(i-e)/s:4+(e-n)/s:0;return{h:ct(60*(a<0?a+6:a)),s:ct(r?s/r*100:0),v:ct(r/255*100),a:o}},jt=function(t){return{h:ct(t.h),s:ct(t.s),v:ct(t.v),a:ct(t.a,2)}},zt=n.memo(function(t){var e=t.hue,i=t.onChange,o=st(["react-colorful__hue",t.className]);return n.createElement("div",{className:o},n.createElement(rt,{onMove:function(t){i({h:360*t.left})},onKey:function(t){i({h:tt(e+360*t.left,0,360)})},"aria-label":"Hue","aria-valuenow":ct(e),"aria-valuemax":"360","aria-valuemin":"0"},n.createElement(at,{className:"react-colorful__hue-pointer",left:e/360,color:gt({h:e,s:100,v:100,a:1})})))}),Et=n.memo(function(t){var e=t.hsva,i=t.onChange,o={backgroundColor:gt({h:e.h,s:100,v:100,a:1})};return n.createElement("div",{className:"react-colorful__saturation",style:o},n.createElement(rt,{onMove:function(t){i({s:100*t.left,v:100-100*t.top})},onKey:function(t){i({s:tt(e.s+100*t.left,0,100),v:tt(e.v-100*t.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ct(e.s)+"%, Brightness "+ct(e.v)+"%"},n.createElement(at,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:gt(e)})))}),Ht=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0},Lt=function(t,e){return t.replace(/\s/g,"")===e.replace(/\s/g,"")};function Pt(t,e,i){var o=Z(i),r=n.useState(function(){return t.toHsva(e)}),s=r[0],a=r[1],c=n.useRef({color:e,hsva:s});n.useEffect(function(){if(!t.equal(e,c.current.color)){var n=t.toHsva(e);c.current={hsva:n,color:e},a(n)}},[e,t]),n.useEffect(function(){var e;Ht(s,c.current.hsva)||t.equal(e=t.fromHsva(s),c.current.color)||(c.current={hsva:s,color:e},o(e))},[s,t,o]);var l=n.useCallback(function(t){a(function(e){return Object.assign({},e,t)})},[]);return[s,l]}var _t="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,Ft=new Map,Rt=function(t){_t(function(){var e=t.current?t.current.ownerDocument:document;if(void 0!==e&&!Ft.has(e)){var n=e.createElement("style");n.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',Ft.set(e,n);var i="undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0;i&&n.setAttribute("nonce",i),e.head.appendChild(n)}},[])},It=function(t){var e=t.className,i=t.colorModel,o=t.color,r=void 0===o?i.defaultColor:o,s=t.onChange,a=Y(t,["className","colorModel","color","onChange"]),c=n.useRef(null);Rt(c);var l=Pt(i,r,s),d=l[0],u=l[1],p=st(["react-colorful",e]);return n.createElement("div",X({},a,{ref:c,className:p}),n.createElement(Et,{hsva:d,onChange:u}),n.createElement(zt,{hue:d.h,onChange:u,className:"react-colorful__last-control"}))},Mt={defaultColor:"000",toHsva:function(t){return Nt(dt(t))},fromHsva:function(t){return function(t){return kt(vt(t))}({h:t.h,s:t.s,v:t.v,a:1})},equal:function(t,e){return t.toLowerCase()===e.toLowerCase()||Ht(dt(t),dt(e))}},Dt=function(t){return n.createElement(It,X({},t,{colorModel:Mt}))},Tt=function(t){var e=t.className,i=t.hsva,o=t.onChange,r={backgroundImage:"linear-gradient(90deg, "+bt(Object.assign({},i,{a:0}))+", "+bt(Object.assign({},i,{a:1}))+")"},s=st(["react-colorful__alpha",e]),a=ct(100*i.a);return n.createElement("div",{className:s},n.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),n.createElement(rt,{onMove:function(t){o({a:t.left})},onKey:function(t){o({a:tt(i.a+t.left)})},"aria-label":"Alpha","aria-valuetext":a+"%","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100"},n.createElement(at,{className:"react-colorful__alpha-pointer",left:i.a,color:bt(i)})))},Wt=function(t){var e=t.className,i=t.colorModel,o=t.color,r=void 0===o?i.defaultColor:o,s=t.onChange,a=Y(t,["className","colorModel","color","onChange"]),c=n.useRef(null);Rt(c);var l=Pt(i,r,s),d=l[0],u=l[1],p=st(["react-colorful",e]);return n.createElement("div",X({},a,{ref:c,className:p}),n.createElement(Et,{hsva:d,onChange:u}),n.createElement(zt,{hue:d.h,onChange:u}),n.createElement(Tt,{hsva:d,onChange:u,className:"react-colorful__last-control"}))},$t={defaultColor:{h:0,s:0,l:0,a:1},toHsva:ht,fromHsva:mt,equal:Ht},Ot=function(t){return n.createElement(Wt,X({},t,{colorModel:$t}))},At={defaultColor:"hsla(0, 0%, 0%, 1)",toHsva:pt,fromHsva:bt,equal:Lt},Qt=function(t){return n.createElement(Wt,X({},t,{colorModel:At}))},Ut={defaultColor:{h:0,s:0,l:0},toHsva:function(t){return ht({h:t.h,s:t.s,l:t.l,a:1})},fromHsva:function(t){return{h:(e=mt(t)).h,s:e.s,l:e.l};var e},equal:Ht},Bt=function(t){return n.createElement(It,X({},t,{colorModel:Ut}))},Vt={defaultColor:"hsl(0, 0%, 0%)",toHsva:ft,fromHsva:gt,equal:Lt},qt=function(t){return n.createElement(It,X({},t,{colorModel:Vt}))},Kt={defaultColor:{h:0,s:0,v:0,a:1},toHsva:function(t){return t},fromHsva:jt,equal:Ht},Jt=function(t){return n.createElement(Wt,X({},t,{colorModel:Kt}))},Gt={defaultColor:"hsva(0, 0%, 0%, 1)",toHsva:wt,fromHsva:function(t){var e=jt(t);return"hsva("+e.h+", "+e.s+"%, "+e.v+"%, "+e.a+")"},equal:Lt},Xt=function(t){return n.createElement(Wt,X({},t,{colorModel:Gt}))},Yt={defaultColor:{h:0,s:0,v:0},toHsva:function(t){return{h:t.h,s:t.s,v:t.v,a:1}},fromHsva:function(t){var e=jt(t);return{h:e.h,s:e.s,v:e.v}},equal:Ht},Zt=function(t){return n.createElement(It,X({},t,{colorModel:Yt}))},te={defaultColor:"hsv(0, 0%, 0%)",toHsva:yt,fromHsva:function(t){var e=jt(t);return"hsv("+e.h+", "+e.s+"%, "+e.v+"%)"},equal:Lt},ee=function(t){return n.createElement(It,X({},t,{colorModel:te}))},ne={defaultColor:{r:0,g:0,b:0,a:1},toHsva:Nt,fromHsva:vt,equal:Ht},ie=function(t){return n.createElement(Wt,X({},t,{colorModel:ne}))},oe={defaultColor:"rgba(0, 0, 0, 1)",toHsva:Ct,fromHsva:function(t){var e=vt(t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},equal:Lt},re=function(t){return n.createElement(Wt,X({},t,{colorModel:oe}))},se={defaultColor:{r:0,g:0,b:0},toHsva:function(t){return Nt({r:t.r,g:t.g,b:t.b,a:1})},fromHsva:function(t){return{r:(e=vt(t)).r,g:e.g,b:e.b};var e},equal:Ht},ae=function(t){return n.createElement(It,X({},t,{colorModel:se}))},ce={defaultColor:"rgb(0, 0, 0)",toHsva:xt,fromHsva:function(t){var e=vt(t);return"rgb("+e.r+", "+e.g+", "+e.b+")"},equal:Lt},le=function(t){return n.createElement(It,X({},t,{colorModel:ce}))};function de(t){const{pickerComponent:n,value:i,onChange:o}=t;switch(n){case"HexColorPicker":default:return e.jsx(Dt,{color:i,onChange:o});case"RgbColorPicker":return e.jsx(ae,{color:i,onChange:o});case"RgbStringColorPicker":return e.jsx(le,{color:i,onChange:o});case"RgbaColorPicker":return e.jsx(ie,{color:i,onChange:o});case"RgbaStringColorPicker":return e.jsx(re,{color:i,onChange:o});case"HueColorPicker":case"HslColorPicker":return e.jsx(Bt,{color:i,onChange:o});case"HslStringColorPicker":return e.jsx(qt,{color:i,onChange:o});case"HslaColorPicker":return e.jsx(Ot,{color:i,onChange:o});case"HslaStringColorPicker":return e.jsx(Qt,{color:i,onChange:o});case"HsvColorPicker":return e.jsx(Zt,{color:i,onChange:o});case"HsvStringColorPicker":return e.jsx(ee,{color:i,onChange:o});case"HsvaColorPicker":return e.jsx(Jt,{color:i,onChange:o});case"HsvaStringColorPicker":return e.jsx(Xt,{color:i,onChange:o})}}function ue(t){const{isPopupOpen:n,tooltip:i,resetRef:o,onResetButtonClick:r,onToggleButtonClick:s}=t,a=`url("${B}")`;return e.jsxs(e.Fragment,{children:[o&&r&&e.jsx("button",{type:"button",ref:o,className:"wpbf-control-reset"+(n?" is-shown":""),onClick:r,children:e.jsx("i",{className:"dashicons dashicons-image-rotate"})}),e.jsxs("div",{className:"wpbf-trigger-circle-wrapper",children:[i&&e.jsx("div",{className:"wpbf-label-tooltip",children:i}),e.jsx("button",{type:"button",className:"wpbf-trigger-circle",onClick:s,style:{backgroundImage:a},children:e.jsx("div",{className:"wpbf-color-preview",style:{backgroundColor:t.color?t.color:"transparent"}})})]})]})}function pe(t){const{label:n,description:i,setNotificationContainer:o}=t;return e.jsxs(e.Fragment,{children:[n||i?e.jsxs("label",{className:"wpbf-control-label",children:[n&&e.jsx("span",{className:"customize-control-title",dangerouslySetInnerHTML:{__html:n}}),i&&e.jsx("span",{className:"description customize-control-description",dangerouslySetInnerHTML:{__html:i}})]}):"",e.jsx("div",{className:"customize-control-notifications-container",ref:o})]})}function fe(t){const{label:n,description:i,labelStyle:o,setNotificationContainer:r}=t;function s(){return e.jsx(pe,{label:n,description:i,setNotificationContainer:r})}function a(i){return void 0===t.inputValue||void 0===t.isPopupOpen?e.jsx(e.Fragment,{}):e.jsx("div",{className:"wpbf-buttons",children:e.jsx(ue,{color:String(t.useHueMode?q(t.inputValue):t.inputValue),isPopupOpen:t.isPopupOpen,resetRef:t.resetRef,onToggleButtonClick:t.togglePicker,onResetButtonClick:t.onResetButtonClick,tooltip:i&&!t.isPopupOpen?n:void 0})})}switch(o){case"tooltip":return e.jsx(e.Fragment,{children:a(!0)});case"top":return e.jsxs(e.Fragment,{children:[s(),a()]});case"label_only":return s();case"none":return a();default:return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"wpbf-control-cols",children:[e.jsx("div",{className:"wpbf-control-left-col",children:s()}),e.jsx("div",{className:"wpbf-control-right-col",children:a()})]})})}}function he(t,e,n,i){if(""===t)return"";if(e)return String(V(t));if("number"==typeof t)return"";let o,r,s,a;switch(n){case"HexColorPicker":a="string"==typeof t&&t.includes("#")?t:M(t).toHex();break;case"RgbColorPicker":a="string"==typeof t&&t.includes("rgb(")?t:M(t).toRgbString();break;case"RgbStringColorPicker":a="string"==typeof t&&t.includes("rgba")?t:M(t).toRgbString();break;case"RgbaColorPicker":o=M(t).toRgb(),o.a<1?a="string"==typeof t&&t.includes("rgba")?t:M(t).toRgbString():(a=M(t).toRgbString(),a.includes("rgb")&&!a.includes("rgba")&&(a=a.replace("rgb","rgba"),a=a.replace(")",", 1)")));break;case"RgbaStringColorPicker":o=M(t).toRgb(),1!=o.a||i?(a=M(t).toRgbString(),a.includes("rgb")&&!a.includes("rgba")&&(a=a.replace("rgb","rgba"),a=a.replace(")",", 1)"))):a="string"==typeof t&&t.includes("#")?t:M(t).toHex();break;case"HslColorPicker":case"HslStringColorPicker":a="string"==typeof t&&t.includes("hsl(")?t:M(t).toHslString();break;case"HslaColorPicker":case"HslaStringColorPicker":a=M(t).toHslString(),a.includes("hsl")&&!a.includes("hsla")&&(a=a.replace("hsl","hsla"),a=a.replace(")",", 1)"));break;case"HsvColorPicker":case"HsvStringColorPicker":r=M(t).toHsv(),a="hsv("+r.h+", "+r.s+"%, "+r.v+"%)";break;case"HsvaColorPicker":case"HsvaStringColorPicker":s=M(t).toHsv(),a="hsva("+s.h+", "+s.s+"%, "+s.v+"%, "+s.a+")";break;default:a=M(t).toHex()}return a.replace(";","")}function me(t,e,n){let i;if(e){return{h:V(t),s:100,l:50}}switch("number"==typeof t&&(t="#000000"),n){case"HexColorPicker":default:i=M(t).toHex();break;case"RgbColorPicker":i=M(t).toRgb(),i={r:i.r,g:i.g,b:i.b};break;case"RgbStringColorPicker":i=M(t).toRgbString();break;case"RgbaColorPicker":i=M(t).toRgb();break;case"RgbaStringColorPicker":i=M(t).toRgbString(),i.includes("rgb")&&!i.includes("rgba")&&(i=i.replace("rgb","rgba"),i=i.replace(")",", 1)"));break;case"HslColorPicker":i=M(t).toHsl(),i={h:i.h,s:i.s,l:i.l};break;case"HslStringColorPicker":i=M(t).toHslString();break;case"HslaColorPicker":i=M(t).toHsl();break;case"HslaStringColorPicker":i=M(t).toHslString(),i.includes("hsl")&&!i.includes("hsla")&&(i=i.replace("hsl","hsla"),i=i.replace(")",", 1)"));break;case"HsvColorPicker":i=M(t).toHsv(),i={h:i.h,s:i.s,v:i.v};break;case"HsvStringColorPicker":const e=M(t).toHsv();i="hsv("+e.h+", "+e.s+"%, "+e.v+"%)";break;case"HsvaColorPicker":i=M(t).toHsv();break;case"HsvaStringColorPicker":const n=M(t).toHsv();i="hsva("+n.h+", "+n.s+"%, "+n.v+"%, "+n.a+")"}return i}function ge(t){const{container:i,useHueMode:o,pickerComponent:r,formComponent:s,label:a,description:c,labelStyle:l,useExternalPopupToggle:d}=t,[u,p]=n.useState(()=>he(t.value,o,r,s)),[f,h]=n.useState(()=>me(t.value,o,r));let m=u,g=f;t.overrideUpdateComponentStateFn?.(function(t){const e=he(t,o,r,s);let n=!1;n="string"==typeof e||o?e!==u:JSON.stringify(e)!==JSON.stringify(m),n&&p(e);const i=me(t,o,r);let a;a="string"==typeof i||o?i!==f:JSON.stringify(i)!==JSON.stringify(g),a&&h(i)});const b=""!==t.default&&void 0!==t.default?t.default:t.value;const v=n.useRef(null),w=n.useRef(null),y=n.useRef(null),[C,x]=n.useState(t.isPopupOpen??!1);t.type&&"wpbf-multicolor"===t.type&&(n.useEffect(()=>{p(he(t.value,o,r,s)),h(me(t.value,o,r))},[t.value]),n.useEffect(()=>{x(t.isPopupOpen??!1)},[t.isPopupOpen]));const[S,k]=n.useState({}),N=()=>{let t={};if("default"===l)return t;const e=window.getComputedStyle(i.parentNode).paddingLeft,n=2*parseInt(e,10);t.width=i.parentNode.getBoundingClientRect().width-n;const o=-1*(i.offsetLeft-9);return t.left=o+"px",t};function j(){"string"==typeof u&&4===u.length&&u.includes("#")&&p(M(u).toHex())}function z(){C&&(x(!1),setTimeout(j,200))}var E;E=function(){k(N())},n.useEffect(()=>{const t=t=>{E()};return window.addEventListener("resize",t,!0),()=>{window.removeEventListener("resize",t,!0)}},[E]),d||(J(v,z),G(w,y,z));let H=t.colorSwatches;if(jQuery.wp&&jQuery.wp.wpColorPicker){const t=jQuery.wp.wpColorPicker.prototype.options.palettes;if(Array.isArray(t)){if(t.length<8)for(let e=t.length;e<8;e++)t[e]&&t.push(H[e]);H=t}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`wpbf-control-form ${o?"use-hue-mode":""} has-${l}-label-style`,ref:v,tabIndex:1,children:[!t.removeHeader&&e.jsx(fe,{label:a,description:c,labelStyle:l,pickerComponent:r,useHueMode:o,inputValue:u,isPopupOpen:C,togglePicker:function(){d||(C?z():function(){if(C)return;k(N()),j(),x(!0)}())},resetRef:y,onResetButtonClick:()=>{b||(m="",g=""),t.onReset?.()},setNotificationContainer:t.setNotificationContainer}),e.jsxs("div",{ref:w,className:`${r} colorPickerContainer ${C?"is-open":""}`,style:S,children:[!o&&e.jsx(D,{colors:H,onClick:e=>{t.onChange?.(e)}}),e.jsx(de,{pickerComponent:r,value:f,onChange:e=>{g=e,t.onChange?.(e)}}),e.jsx(K,{pickerComponent:r,useHueMode:o,color:u,onChange:e=>{m=e,t.onChange?.(e)}})]})]})})}var be,ve={};var we=function(){if(be)return ve;be=1;var t=i;return ve.createRoot=t.createRoot,ve.hydrateRoot=t.hydrateRoot,ve}();function ye(t,e,n,i){if(""===t)return"";if(e)return V(t);if("number"==typeof t)return"";let o,r,s,a;switch(n){case"HexColorPicker":default:a="string"==typeof t&&t.includes("#")?t:M(t).toHex();break;case"RgbColorPicker":a=M(t).toRgb(),a={r:a.r,g:a.g,b:a.b};break;case"RgbStringColorPicker":a="string"==typeof t&&t.includes("rgb(")?t:M(t).toRgbString();break;case"RgbaColorPicker":o=M(t).toRgb(),a=o;break;case"RgbaStringColorPicker":o=M(t).toRgb(),o.a<1?a="string"==typeof t&&t.includes("rgba")?t:M(t).toRgbString():i?(a=M(t).toRgbString(),a.includes("rgb")&&!a.includes("rgba")&&(a=a.replace("rgb","rgba"),a=a.replace(")",", 1)"))):a="string"==typeof t&&t.includes("#")?t:M(t).toHex();break;case"HslColorPicker":a=M(t).toHsl(),a={h:a.h,s:a.s,l:a.l};break;case"HslStringColorPicker":a="string"==typeof t&&t.includes("hsl(")?t:M(t).toHslString();break;case"HslaColorPicker":a=M(t).toHsl();break;case"HslaStringColorPicker":a=M(t).toHslString(),a.includes("hsl")&&!a.includes("hsla")&&(a=a.replace("hsl","hsla"),a=a.replace(")",", 1)"));break;case"HsvColorPicker":a=M(t).toHsv(),a={h:a.h,s:a.s,v:a.v};break;case"HsvStringColorPicker":r=M(t).toHsv(),a="hsv("+r.h+", "+r.s+"%, "+r.v+"%)";break;case"HsvaColorPicker":a=M(t).toHsv();break;case"HsvaStringColorPicker":s=M(t).toHsv(),a="hsva("+s.h+", "+s.s+"%, "+s.v+"%, "+s.a+")"}return a}const Ce=window.wp.customize?.Control.extend({initialize:function(t,e){this.setNotificationContainer=this.setNotificationContainer?.bind(this),this.overrideUpdateComponentStateFn=this.overrideUpdateComponentStateFn?.bind(this),this.onChange=this.onChange?.bind(this),this.onReset=this.onReset?.bind(this),window.wp.customize?.Control.prototype.initialize.call(this,t,e);const n=this;window.wp.customize?.control.bind("removed",function t(e){n===e&&(n.destroy&&n.destroy(),n.container?.remove(),window.wp.customize?.control.unbind("removed",t))})},setNotificationContainer:function(t){this.notifications&&(this.notifications.container=jQuery(t),this.notifications.render())},renderContent:function(){if(!this.params)return;if(!this.container||!this.container.length)return;const t=this.params.mode,n="hue"===t,i=this.params.formComponent;let o="";o=i||("alpha"===t?"RgbaStringColorPicker":"HexColorPicker"),o=n?"HueColorPicker":o,!this.root&&this.container&&(this.root=we.createRoot(this.container[0])),this.root?.render(e.jsx(ge,{type:this.params?.type,container:this.container[0],label:this.params.label,description:this.params.description,useHueMode:n,formComponent:i,pickerComponent:o,labelStyle:this.params.labelStyle,colorSwatches:this.params.colorSwatches,value:this.params.value,default:this.params.default,onChange:t=>this.onChange?.(t),onReset:()=>this.onReset?.(),overrideUpdateComponentStateFn:this.overrideUpdateComponentStateFn,setNotificationContainer:this.setNotificationContainer}))},ready:function(){const t=this;this.setting?.bind(e=>{t.updateComponentState?.(e)})},updateCustomizerSetting:function(t){if(void 0===t)return;const e=this.params;if(!e)return;const n=e.mode,i="hue"===n,o=e.formComponent;let r="";r=o||("alpha"===n?"RgbaStringColorPicker":"HexColorPicker"),this.setting?.set(ye(t,i,r,o))},onChange:function(t){this.updateCustomizerSetting?.(t)},onReset:function(){const t=this.params;if(!t)return;const e=""!==t.default&&void 0!==t.default?t.default:t.value;this.updateCustomizerSetting?.(e)},updateComponentState:function(t){},overrideUpdateComponentStateFn:function(t){this.updateComponentState=t},destroy:function(){this.root?.unmount(),this.root=void 0,window.wp.customize?.Control.prototype.destroy?.call(this)}});function xe(t){const{container:i,choices:o,setNotificationContainer:r,useHueMode:s,pickerComponent:a,formComponent:c,label:l,description:d}=t,[u,p]=n.useState(t.value),[f,h]=n.useState(void 0);function m(){h(void 0)}t.overrideUpdateComponentStateFn?.(function(t){p(t)});const g=n.useRef(null),b=n.useRef(null),v=n.useRef(null);return J(g,m),G(b,v,m),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"wpbf-multicolor",ref:g,children:[e.jsxs("div",{className:"wpbf-control-cols",children:[e.jsx("div",{className:"wpbf-control-left-col",children:e.jsx(pe,{label:l,description:d,setNotificationContainer:r})}),e.jsx("div",{className:"wpbf-control-right-col",children:e.jsxs("div",{className:"wpbf-buttons",children:[e.jsx("button",{type:"button",ref:v,className:"wpbf-control-reset"+(f?" is-shown":""),title:"Reset colors set",onClick:()=>t.onReset?.(),children:e.jsx("i",{className:"dashicons dashicons-image-rotate"})}),t.keys.map((t,n)=>{const i=he(u[t]??"",s,a,c);return e.jsx(ue,{color:i,isPopupOpen:f===t,tooltip:o[t]??void 0,onToggleButtonClick:()=>function(t){h(f?void 0:t)}(t)},`${t}-${n}`)})]})})]}),e.jsx("div",{ref:b,className:"wpbf-color-picker-popup",children:t.keys.map((n,o)=>e.jsx(ge,{type:"wpbf-multicolor",container:i,label:t.label,description:t.description,useHueMode:s,formComponent:c,pickerComponent:a,labelStyle:"none",colorSwatches:t.colorSwatches,value:u[n]??"",default:t.default[n],setNotificationContainer:t.setNotificationContainer,removeHeader:!0,isPopupOpen:f===n,useExternalPopupToggle:!0,onChange:e=>{const i={...u};i[n]=e,t.onChange?.(i)}},`${n}-${o}`))})]})})}const Se=window.wp.customize?.Control.extend({initialize:function(t,e){this.setNotificationContainer=this.setNotificationContainer?.bind(this),this.overrideUpdateComponentStateFn=this.overrideUpdateComponentStateFn?.bind(this),this.onChange=this.onChange?.bind(this),this.onReset=this.onReset?.bind(this),window.wp.customize?.Control.prototype.initialize.call(this,t,e);const n=this;window.wp.customize?.control.bind("removed",function t(e){n===e&&(n.destroy&&n.destroy(),n.container?.remove(),window.wp.customize?.control.unbind("removed",t))})},setNotificationContainer:function(t){this.notifications&&(this.notifications.container=jQuery(t),this.notifications.render())},renderContent:function(){if(!this.params)return;if(!this.container||!this.container.length)return;const t=this.params.mode,n="hue"===t,i=this.params.formComponent;let o="";o=i||("alpha"===t?"RgbaStringColorPicker":"HexColorPicker"),o=n?"HueColorPicker":o,!this.root&&this.container&&(this.root=we.createRoot(this.container[0])),this.root?.render(e.jsx(xe,{id:this.setting?.id??"",container:this.container[0],choices:this.params.choices,keys:Object.keys(this.params.choices),label:this.params.label,description:this.params.description,useHueMode:n,formComponent:i,pickerComponent:o,labelStyle:this.params.labelStyle,colorSwatches:this.params.colorSwatches,value:this.params.value,default:this.params.default,onChange:this.onChange,onReset:this.onReset,overrideUpdateComponentStateFn:this.overrideUpdateComponentStateFn,setNotificationContainer:this.setNotificationContainer}))},ready:function(){this.setting?.bind(t=>{this.updateComponentState?.(t)})},onChange:function(t){this.updateCustomizerSetting?.(t)},onReset:function(){const t=this.params;if(!t)return;const e=void 0!==t.default&&Object.keys(t.default).length>0?t.default:t.value;this.updateCustomizerSetting?.(e)},updateCustomizerSetting:function(t){if(void 0===t)return;const e=this.params;if(!e)return;const n=e.mode,i="hue"===n,o=e.formComponent;let r="";r=o||("alpha"===n?"RgbaStringColorPicker":"HexColorPicker");const s={};for(const a in t)t.hasOwnProperty(a)&&(s[a]=ye(t[a],i,r,o));this.setting?.set(s)},updateComponentState:function(t){},overrideUpdateComponentStateFn:function(t){this.updateComponentState=t},destroy:function(){this.root?.unmount(),this.root=void 0,window.wp.customize?.Control.prototype.destroy&&window.wp.customize?.Control.prototype.destroy.call(this)}});function ke(t){try{return JSON.stringify(t)}catch(e){return""}}function Ne(t){if(""!==t&&t){if("string"!=typeof t)return t;try{return JSON.parse(t)}catch(e){return}}}function je(t,e,n,i,o){const r="string"==typeof n?Ne(n):n;if(!r)return function(t){const e={};return t.forEach(t=>{e[t]=""}),e}(e);const s={};return e.forEach(e=>{if(!r.hasOwnProperty(e))return void(s[e]="");let n=r[e];"number"===t&&(n=function(t,e,n){let i=String(t).trim();if(""===i)return"";if("-"===i)return"-";const o=i.endsWith(".");i=o?i.replace(".",""):i;const r=A(t);if(""===r.number)return o?"0.":"";let s=r.number;"number"!=typeof e&&"number"!=typeof n||(s=O(s,e,n));return o?s+".":s}(r[e],i,o)),s[e]="string"!=typeof n&&"number"!=typeof n?"":n}),s}function ze(t){let e=String(t).trim();if(""===e)return"";if("-"===e)return"-";const n=e.endsWith(".");e=n?e.replace(".",""):e;const i=A(t);if(""===i.number)return n?"0.":"";let o=String(i.number);return n?o+".":o}function Ee(t,e){const n={};for(let i=0;i<t.length;i++){n[t[i]]=t[i]}for(const i in e){if(!t.includes(i))continue;if(!e.hasOwnProperty(i))continue;if(!n.hasOwnProperty(i))continue;const o=e[i];""!==o&&(n[i]=ze(o))}return n}function He(t,e){const n=Ne(e);return n?Ee(t,n):function(t){const e={};for(let n=0;n<t.length;n++){e[t[n]]=""}return e}(t)}function Le(t){return e.jsx("div",{className:"wpbf-device-buttons",children:t.devices.map((t,n)=>{const i=`dashicons dashicons-${"mobile"===t?"smartphone":t}`;return e.jsx("button",{type:"button",className:`wpbf-device-button wpbf-device-button-${t} ${0===n?" is-active":""}`,"data-wpbf-device":t,children:e.jsx("i",{className:i})},n)})})}function Pe(t){const[i,o]=n.useState(()=>t.valueArray),r=""!==t.default&&void 0!==t.default;function s(e){const n=t.dontSaveUnit?Ee(t.dimensions,e):function(t,e,n){const i={};for(let o=0;o<t.length;o++)i[t[o]]=t[o];for(const o in n){if(!t.includes(o))continue;if(!i.hasOwnProperty(o))continue;const r=n[o];if(""!==r){const t=ze(r);i[o]=t+e}}return i}(t.dimensions,t.unit,e);t.saveAsJson?t.updateCustomizerSetting?.(ke(e)):t.updateCustomizerSetting?.(n)}function a(t){const e=[];for(const n in i){if(!i.hasOwnProperty(n))continue;if(!t){e.push({dimension:n,value:i[n]});continue}n.includes(t+"_")&&e.push({dimension:n,value:i[n]})}return e}function c(n,a){return e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"wpbf-control-reset",onClick:e=>function(e,n){const o=r?t.defaultArray:t.valueArray;if(!n)return void s(o);const a={...i};for(const t in a)a.hasOwnProperty(t)&&t.includes(n+"_")&&o.hasOwnProperty(t)&&(a[t]=o[t]);s(a)}(0,n),children:e.jsx("i",{className:"dashicons dashicons-image-rotate"})}),e.jsxs("div",{className:"wpbf-control-cols",children:[e.jsx("div",{className:"wpbf-control-left-col",children:e.jsx("div",{className:"wpbf-control-fields",children:a.map((r,a)=>{const c=`wpbf-control-input wpbf-control-input${n?`-${n}`:""}-${r.dimension}`,l=`_customize-input-${t.id}${n?`-${n}`:""}-${r.dimension}`,d=n?r.dimension.replace(n+"_",""):r.dimension;return e.jsxs("div",{className:"wpbf-control-field",children:[e.jsx("input",{id:l,type:"number",value:r.value||0===r.value?r.value:"",className:c,onChange:e=>function(e,n){if(!t.dimensions.includes(n))return;if(!e.target)return;const r={...i};r.hasOwnProperty(n)&&(r[n]=e.target.value,o(r),s(r))}(e,r.dimension)}),e.jsx("label",{className:"wpbf-control-sublabel",htmlFor:l,children:d})]},a)})})}),e.jsx("div",{className:"wpbf-control-right-col",children:e.jsx("span",{ref:l,className:"wpbf-control-unit",children:t.unit})})]})]})}t.overrideUpdateComponentStateFn?.(function(e){const n="string"==typeof e?He(t.dimensions,e):Ee(t.dimensions,e);o(n)});const l=n.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"wpbf-control-header",children:[t.label&&e.jsx("label",{className:"customize-control-title",htmlFor:`wpbf-control-input-${t.type}-top`,children:e.jsx("span",{className:"customize-control-title",children:t.label})}),t.isResponsive&&t.devices&&t.devices.length?e.jsx(Le,{devices:t.devices}):e.jsx(e.Fragment,{})]}),t.description&&e.jsx("span",{className:"customize-control-description description",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"customize-control-notifications-container",ref:t.setNotificationContainer}),e.jsx("div",{className:"wpbf-control-form",children:t.isResponsive&&t.devices&&t.devices.length?e.jsx(e.Fragment,{children:t.devices.map((t,n)=>{const i=0===n;return e.jsx("div",{className:`wpbf-control-device wpbf-control-${t} ${i?"is-active":""}`,"data-wpbf-device":t,children:c(t,a(t))},n)})}):c("",a())})]})}function _e(t){return t.Control.extend({initialize:function(e,n){this.setNotificationContainer=this.setNotificationContainer?.bind(this),this.overrideUpdateComponentStateFn=this.overrideUpdateComponentStateFn?.bind(this),this.updateCustomizerSetting=this.updateCustomizerSetting?.bind(this),t.Control.prototype.initialize.call(this,e,n);const i=this;t.control.bind("removed",function e(n){i===n&&(i.destroy?.(),i.container?.remove(),t.control.unbind("removed",e))})},setNotificationContainer:function(t){this.notifications&&(this.notifications.container=jQuery(t)),this.notifications?.render()},renderContent:function(){const t="responsive-margin"===this.params?.subtype||"responsive-padding"===this.params?.subtype;!this.root&&this.container&&(this.root=we.createRoot(this.container[0])),this.root?.render(e.jsx(Pe,{id:this.setting?.id??"",type:this.params?.type,subtype:this.params?.subtype,label:this.params?.label,description:this.params?.description,default:this.params?.default,defaultArray:this.params?.defaultArray,valueArray:this.params?.valueArray,unit:this.params?.unit,saveAsJson:this.params?.saveAsJson,dontSaveUnit:this.params?.dontSaveUnit,dimensions:this.params?.dimensions,devices:this.params?.devices,isResponsive:t,updateCustomizerSetting:this.updateCustomizerSetting,overrideUpdateComponentStateFn:this.overrideUpdateComponentStateFn,setNotificationContainer:this.setNotificationContainer})),t&&(this.container?.addClass("margin-padding-control"),this.container?.data("control-subtype",this.params?.subtype)),this.params?.allowCollapse&&this.container?.addClass("allowCollapse")},ready:function(){this.setting?.bind(t=>{const e="string"==typeof t?He(this.params?.dimensions,t):t;this.updateComponentState?.(e)})},updateCustomizerSetting:function(t){void 0!==t&&this.setting?.set(t)},updateComponentState:t=>{},overrideUpdateComponentStateFn:function(t){this.updateComponentState=t},destroy:function(){this.root?.unmount(),this.root=void 0,t.Control.prototype.destroy?.call(this)}})}window.wp.customize&&(Ce&&(window.wp.customize.controlConstructor["wpbf-color"]=Ce),Se&&(window.wp.customize.controlConstructor["wpbf-multicolor"]=Se)),wp.customize.controlConstructor["wpbf-dimension"]=wp.customize.wpbfDynamicControl.extend({initWpbfControl:function(t){let e;(t=t||this).wpbfNotifications(),t.container.on("change keyup paste","input",function(){e=jQuery(this).val(),t.setting?.set(e)})},wpbfNotifications:function(){let t=this;const e=t.params.allowUnitless;wp.customize(t.id,function(n){n.bind(function(i){const o="long_title";t.validateCssValue(i)||e&&!isNaN(i)?n.notifications.remove(o):n.notifications.add(o,new wp.customize.Notification(o,{type:"warning",message:wpbfDimensionControlL10n["invalid-value"]}))})})},validateCssValue:function(t){const e=this;if(!t||""===t||0===t||"0"===t||"auto"===t||"inherit"===t||"initial"===t)return!0;const n="string"==typeof t?t:t.toString();if(0<=n.indexOf("calc(")&&0<=n.indexOf(")"))return!0;const i=parseFloat(n),o=n.replace(i.toString(),"");if(!o)return!0;const r=n.split(" ");let s=!0;return 2<=r.length?(r.forEach(function(t){t&&!e.validateCssValue(t)&&(s=!1)}),s):!isNaN(i)&&-1!==["fr","rem","em","ex","%","px","cm","mm","in","pt","pc","ch","vh","vw","vmin","vmax"].indexOf(o)}}),wp.customize.controlConstructor["wpbf-editor"]=wp.customize.wpbfDynamicControl.extend({initWpbfControl:function(t){const e=t||this,n=e.container.find("textarea"),i="wpbf-editor-"+e.id.replace("[","").replace("]",""),o={tinymce:{wpautop:!0},quicktags:!0,mediaButtons:!0};wp.editor&&wp.editor.initialize&&wp.editor.initialize(i,jQuery.extend({},o,{tinymce:e.params.tinymce,quicktags:e.params.quicktags}));const r=tinyMCE.get(i);r&&r.onChange.add(function(t){t.save();const i=r.getContent();n.val(i).trigger("change"),wp.customize.instance(e.id).set(i)})}}),wp.customize.controlConstructor["wpbf-generic"]=wp.customize.wpbfDynamicControl.extend({initWpbfControl:function(t){const e=(t=t||this).params;if("wpbf-generic"!==e.type)return;t.container.find(".wpbf-control-form input, .wpbf-control-form textarea").on("input",function(){let n=this instanceof HTMLInputElement||this instanceof HTMLTextAreaElement?this.value:"";"number"!==e.subtype&&"number-unit"!==e.subtype||(e.max=T(e.min,e.max),n="number"===e.subtype?O(n,e.min,e.max):U(n,e.min,e.max)),t.setting?.set(n)})}}),window.wp.customize&&function(t){t.controlConstructor["wpbf-assoc-array"]=t.wpbfDynamicControl.extend({initWpbfControl:function(e){function n(i){e===i&&(e?.destroy?.(),e.container?.remove(),t.control.unbind("removed",n))}(e=e||this)&&(e.setting?.bind(t=>{e.updateComponentState?.(t)}),t.control.bind("removed",n))},updateComponentState:function(t){const e=this.container[0].querySelectorAll(".wpbf-control-form input[data-setting-prop]");e.length&&e.forEach(e=>{if(!(e instanceof HTMLInputElement))return;const n=e.dataset.settingProp;n&&t[n]&&(e.value=t[n])})},ready:function(){if(!this.container)return;this.currentValue=this.setting?.get();const t=this.container[0].querySelectorAll("input[data-setting-prop]");t.forEach(e=>{e instanceof HTMLInputElement&&e.addEventListener("change",e=>{const n={};t.forEach(t=>{if(!(t instanceof HTMLInputElement))return;const e=t.dataset.settingProp;e&&(n[e]=t.value)}),this.setting?.set(n)})});const e=this;this.setting?.bind(t=>{e.updateComponentState?.(t)})},destroy:function(){}})}(window.wp.customize),wp.customize.controlConstructor["wpbf-responsive-generic"]=wp.customize.wpbfDynamicControl.extend({initWpbfControl:function(t){const e=(t=t||this).params;if("wpbf-responsive-generic"!==e.type)return;t.container.find(".wpbf-control-form input, .wpbf-control-form textarea").on("input",function(n){const i=t.setting?.get(),o="string"==typeof i?je(e.subtype,e.devices,i,e.min,e.max):i,r=this.parentNode,s=r instanceof HTMLElement?r.dataset.wpbfDevice:void 0;if(!s||!o||!o.hasOwnProperty(s))return;let a=this instanceof HTMLInputElement||this instanceof HTMLTextAreaElement?this.value:"";"number"!==e.subtype&&"number-unit"!==e.subtype||(e.max=T(e.min,e.max),a="number"===e.subtype?O(a,e.min,e.max):U(a,e.min,e.max)),o[s]=a;const c=e.saveAsJson?ke(o):o;t.setting?.set(c)})}}),window.wp.customize&&(window.wp.customize.controlConstructor["wpbf-margin-padding"]=_e(window.wp.customize),window.wp.customize.controlConstructor["wpbf-responsive-margin-padding"]=_e(window.wp.customize)),wp.customize.controlConstructor["wpbf-image"]=wp.customize.wpbfDynamicControl.extend({initWpbfControl:function(e){const n=e||this,i=n.params,o=i.saveAs,r=i.defaultSrc,s=i.valueSrc,a=n.container[0].querySelector(".attachment-media-view"),c=a?.querySelector(".thumbnail")??null,l=a?.querySelector(".button-add-media")??null,d=a?.querySelector(".change-button")??null,u=a?.querySelector(".remove-button")??null,p=a?.querySelector(".default-button")??null;m();let f=s.url;function h(){const e=wp.media({multiple:!1}).open().on("select",function(){const i=e.state().get("selection").first().toJSON();s.id=i.id,s.url=i.url,s.width=i.width,s.height=i.height,f=i.url,t.isUndefined(i.sizes)||(s.url=i.sizes.full.url,f=i.sizes.full.url,t.isUndefined(i.sizes.medium)?t.isUndefined(i.sizes.thumbnail)||(f=i.sizes.thumbnail.url):f=i.sizes.medium.url),"array"===o?n.setting?.set(s):"id"===o?n.setting?.set(s.id):"url"===o&&n.setting?.set(s.url),c&&(c.innerHTML='<img class="attachment-thumb" src="'+f+'" alt="" />'),m()})}function m(){s.url?(c&&c.classList.remove("hidden"),u&&u.classList.remove("hidden"),l&&l.classList.add("hidden"),d&&d.classList.remove("hidden")):(c&&c.classList.add("hidden"),u&&u.classList.add("hidden"),l&&l.classList.remove("hidden"),d&&d.classList.add("hidden")),s.id===r.id?p&&p.classList.add("hidden"):p&&p.classList.remove("hidden")}c&&f&&(c.innerHTML='<img class="attachment-thumb" src="'+f+'" alt="" />'),l?.addEventListener("click",h),d?.addEventListener("click",h),u?.addEventListener("click",function(){s.id=0,s.url="",s.width=0,void(s.height=0),"array"===o?n.setting?.set(s):"id"===o?n.setting?.set(0):"url"===o&&n.setting?.set("");c&&(c.innerHTML=wp.i18n.__("No image selected","wpbf"));m()}),p?.addEventListener("click",function(){n.setting?.set(r),c&&(c.innerHTML='<img class="attachment-thumb" src="'+n.params.default+'" alt="" />');m()})}}),wp.customize&&(wp.customize.controlConstructor["wpbf-radio"]=wp.customize.wpbfDynamicControl.extend({}),wp.customize.controlConstructor["wpbf-radio-buttonset"]=wp.customize.wpbfDynamicControl.extend({}),wp.customize.controlConstructor["wpbf-radio-image"]=wp.customize.wpbfDynamicControl.extend({}));class Fe{constructor(t,e,n,i){__publicField(this,"rowIndex"),__publicField(this,"container"),__publicField(this,"label"),__publicField(this,"header"),__publicField(this,"control"),__publicField(this,"setRowIndex",t=>{this.rowIndex=t,this.container.attr("data-row",t),this.container.data("row",t),this.updateLabel()}),__publicField(this,"toggleMinimize",()=>{this.container.toggleClass("minimized"),this.header.find(".dashicons").toggleClass("dashicons-arrow-up dashicons-arrow-down")}),__publicField(this,"remove",()=>{this.container.slideUp(300,()=>{this.container.detach()}),this.container.trigger("row:remove",[this.rowIndex])}),__publicField(this,"updateLabel",()=>{if("field"===this.label.type){const t=this.container[0].querySelector(`.repeater-field [data-field="${this.label.field}"]`);if(t&&t instanceof HTMLInputElement&&"string"==typeof t.value){let e=t.value;if(""!==e){if(this.control.params.fields[this.label.field]&&this.control.params.fields[this.label.field].type)if("select"===this.control.params.fields[this.label.field].type&&this.control.params.fields[this.label.field].choices&&this.control.params.fields[this.label.field].choices[e])e=this.control.params.fields[this.label.field].choices[e];else if(("radio"===this.control.params.fields[this.label.field].type||"radio-image"===this.control.params.fields[this.label.field].type)&&this.rowIndex>=0){const t=this.container.find(`${this.control.selector} [data-row="${this.rowIndex}"] .repeater-field [data-field="${this.label.field}"]:checked`)[0];t&&(e=t.value)}return void this.header.find(".repeater-row-label").text(e)}}}this.header.find(".repeater-row-label").text(`${this.label.value} ${this.rowIndex+1}`)}),this.rowIndex=t,this.container=e,this.label=n,this.header=this.container.find(".repeater-row-header"),this.control=i,this.header.on("click",()=>this.toggleMinimize()),this.container.on("click",".repeater-row-remove",()=>this.remove()),this.header.on("mousedown",()=>this.container.trigger("row:start-dragging")),this.container.on("keyup change","input, select, textarea",t=>this.container.trigger("row:update",[this.rowIndex,o(t.target).data("field"),t.target])),this.setRowIndex(this.rowIndex)}}let Re,Ie;function Me(t,e){if(!function(){if(Re&&Ie)return!0;const t=jQuery.fn.select2?.amd;if(!t)return console.error("SharedFontDataAdapter: Select2 AMD not available"),!1;try{return Re=t.require("select2/utils"),Ie=t.require("select2/data/array"),!0}catch(e){return console.error("SharedFontDataAdapter: Failed to load Select2 modules",e),!1}}())return null;const n=window[t];if(!n||!Array.isArray(n))return console.error(`SharedFontDataAdapter: Global variable "${t}" not found or not an array`),null;const i=new Set(e.map(t=>String(t)));const o=n.map(t=>{const e={id:t.id,text:t.text,disabled:t.disabled,selected:t.id?i.has(t.id):void 0};return t.children&&t.children.length&&(e.children=t.children.map(t=>({id:t.id,text:t.text,disabled:t.disabled,selected:i.has(t.id)}))),e});function r(t,e){this._dataToConvert=o;Object.getPrototypeOf(Ie.prototype).constructor.call(this,t,e)}return Re.Extend(r,Ie),r.prototype._normalizeItem=function(t){return t!==Object(t)?{id:String(t),text:String(t),selected:!1,disabled:!1}:{id:void 0!==t.id?String(t.id):void 0,text:void 0!==t.text?String(t.text):"",selected:!!t.selected,disabled:!!t.disabled,children:t.children}},r}function De(t){let i="";const o=n.useRef(null),r=n.useRef(null);function s(e){const n=void 0===e?0:e,i="string"==typeof n?parseFloat(n):n;if(isNaN(i))return t.min;const o=i<t.min?t.min:i;return o>t.max?t.max:o}t.overrideUpdateComponentStateFn?.(function(t){const e=String(t);"slider"===i?r&&r.current&&(r.current.textContent=e):"input"===i?o&&o.current&&(o.current.value=e):"reset"===i&&(r&&r.current&&(r.current.textContent=e),o&&o.current&&(o.current.value=e))});const a=`wpbf-control-input-${t.id}`,c=s(t.value);return e.jsxs("div",{className:"wpbf-control-form",tabIndex:1,children:[e.jsxs("label",{className:"wpbf-control-label",htmlFor:a,children:[e.jsx("span",{className:"customize-control-title",children:t.label}),e.jsx("span",{className:"customize-control-description description",dangerouslySetInnerHTML:{__html:t.description??""}})]}),e.jsx("div",{className:"customize-control-notifications-container",ref:t.setNotificationContainer}),e.jsx("button",{type:"button",className:"wpbf-control-reset",onClick:function(e){if(void 0!==t.default&&""!==t.default){const e=s(t.default);o&&o.current&&(o.current.value=e.toString()),r&&r.current&&(r.current.textContent=e.toString())}else{if(void 0!==t.value&&""!==t.value){const e=s(t.value);o&&o.current&&(o.current.value=e.toString()),r&&r.current&&(r.current.textContent=e.toString())}else o&&o.current&&(o.current.value=t.min.toString()),r&&r.current&&(r.current.textContent="")}i="reset";const n=s(o.current?.value);o&&o.current&&t.updateCustomizerSetting?.(n)},children:e.jsx("i",{className:"dashicons dashicons-image-rotate"})}),e.jsxs("div",{className:"wpbf-control-cols",children:[e.jsx("div",{className:"wpbf-control-left-col",children:e.jsx("input",{ref:o,type:"range",id:a,defaultValue:c,min:t.min,max:t.max,step:t.step,className:"wpbf-control-slider",onChange:function(e){const n=e.target;i="range"===n.type?"slider":"input";const o=s(n.value);"input"===i&&(n.value=o.toString()),t.updateCustomizerSetting?.(o)}})}),e.jsx("div",{className:"wpbf-control-right-col",children:e.jsx("div",{className:"wpbf-control-value",ref:r,children:c})})]})]})}function Te(t,e,n){let i=String(t).trim();if("-"===i)return"-";const o=i.endsWith(".");i=o?i.replace(".",""):i;const r=Q(t,e,n);if(""===r.number)return o?"0.":"";let s=String(r.number);return o?s+".":r.unit?s+(r.hasTrailingDotBeforeUnit?".":"")+r.unit:s}function We(t,e,n){const i=Q(t,e,n);return""===i.number?e:i.number}function $e(t,e,n,i){const o="string"==typeof e?Ne(e):e;if(!o)return function(t){const e={};return t.forEach(t=>{e[t]=""}),e}(t);const r={};return t.forEach(t=>{if(!o.hasOwnProperty(t))return void(r[t]="");const e=Te(o[t],n,i);r[t]="string"!=typeof e&&"number"!=typeof e?"":e}),r}function Oe(t){let i="";t.overrideUpdateComponentStateFn?.(function(e){"slider"===i?s(Te(e,t.min,t.max)):"input"===i?a(We(e,t.min,t.max)):"reset"===i&&(a(""===e?t.min:e),s(e))});const o=n.useRef(null),r=n.useRef(null);function s(t){r&&r.current&&(r.current.value=String(t))}function a(t){o&&o.current&&(o.current.value=String(t))}const c=`wpbf-control-input-${t.id}`,l=We(t.value,t.min,t.max),d=Te(t.value,t.min,t.max);return e.jsxs("div",{className:"wpbf-control-form",tabIndex:1,children:[t.label||t.description?e.jsxs("label",{className:"wpbf-control-label",htmlFor:c,children:[t.label&&e.jsx("span",{className:"customize-control-title",children:t.label}),t.description&&e.jsx("span",{className:"customize-control-description description",dangerouslySetInnerHTML:{__html:t.description}})]}):null,e.jsx("div",{className:"customize-control-notifications-container",ref:t.setNotificationContainer}),e.jsx("button",{type:"button",className:"wpbf-control-reset",onClick:function(e){let n="";n=""!==t.default&&void 0!==t.default?t.default:""!==t.value?t.value:"",i="reset",t.updateCustomizerSetting?.(n)},children:e.jsx("i",{className:"dashicons dashicons-image-rotate"})}),e.jsxs("div",{className:"wpbf-control-cols",children:[e.jsx("div",{className:"wpbf-control-left-col",children:e.jsx("input",{ref:o,type:"range",id:c,defaultValue:l,min:t.min,max:t.max,step:t.step,className:"wpbf-control-input-slider wpbf-pro-control-input-slider",onChange:function(e){i="slider";const n=O(parseFloat(e.target.value),t.min,t.max);if(!r||!r.current)return;const o=Q(r.current.value,t.min,t.max),s=String(n)+o.unit;t.updateCustomizerSetting?.(s)}})}),e.jsx("div",{className:"wpbf-control-right-col",children:e.jsx("input",{ref:r,type:"text",defaultValue:d,className:"wpbf-control-input",onChange:function(e){i="input",t.updateCustomizerSetting?.(Te(e.target.value,t.min,t.max))}})})]})]})}function Ae(t){const i=$e(t.devices,t.default,t.min,t.max),[o,r]=n.useState($e(t.devices,t.value,t.min,t.max)),[s,a]=n.useState("undefined"!=typeof wp&&wp.customize?.previewedDevice?.get()?wp.customize.previewedDevice.get():t.devices[0]);function c(e){const n=t.saveAsJson?ke(e):e;t.updateCustomizerSetting?.(n)}return n.useEffect(()=>{if("undefined"==typeof wp||!wp.customize?.previewedDevice)return;const e=e=>{t.devices.includes(e)&&a(e)};return wp.customize.previewedDevice.bind(e),()=>{wp.customize.previewedDevice.unbind(e)}},[t.devices]),t.overrideUpdateComponentStateFn?.(function(e){const n=$e(t.devices,e,t.min,t.max);r(n)}),e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"wpbf-control-header",children:[t.label&&e.jsx("label",{className:"customize-control-title",htmlFor:`wpbf-control-input-${t.id}`,children:e.jsx("span",{className:"customize-control-title",children:t.label})}),e.jsx(Le,{devices:t.devices})]}),t.description&&e.jsx("span",{className:"customize-control-description description",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"customize-control-notifications-container",ref:t.setNotificationContainer}),e.jsx("div",{className:"wpbf-control-form",children:t.devices.map((n,r)=>{const a=n===s;return e.jsx("div",{className:`wpbf-control-device wpbf-control-${n} ${a?"is-active":""}`,"data-wpbf-device":n,children:o.hasOwnProperty(n)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"wpbf-control-reset",onClick:t=>function(t,e){const n=o;n.hasOwnProperty(e)&&i.hasOwnProperty(e)&&(n[e]=i[e],c(n))}(0,n),children:e.jsx("i",{className:"dashicons dashicons-image-rotate"})}),e.jsxs("div",{className:"wpbf-control-cols",children:[e.jsx("div",{className:"wpbf-control-left-col",children:e.jsx("input",{type:"range",id:`wpbf-control-input-${t.id}-${n}`,value:We(o[n],t.min,t.max),min:t.min,max:t.max,step:t.step,className:"wpbf-control-input-slider wpbf-pro-control-input-slider",onChange:e=>function(e,n){const i=o;if(!i.hasOwnProperty(n))return;const r=We(e.target.value,t.min,t.max),s=i[n];if(s===r)return;const a=Q(s,t.min,t.max);a.number!==r&&(i[n]=a.unit?r+a.unit:r,c(i))}(e,n)})}),e.jsx("div",{className:"wpbf-control-right-col",children:e.jsx("input",{type:"text",value:Te(o[n],t.min,t.max),className:"wpbf-control-input",onChange:e=>function(e,n){const i=o;if(!i.hasOwnProperty(n))return;const r=Te(e.target.value,t.min,t.max);i[n]=r,c(i)}(e,n)})})]})]})},r)})})]})}function Qe(t,e,n,i,o){const r=window.wp.customize?.control(t);if(!r||!r.setting)return;e=e||r.setting.get();const s={...e};if("font-backup"in s&&delete s["font-backup"],void 0===s)return;if("string"!=typeof s["font-family"])return;"font-family"!==n&&"variant"!==n||(s[n]=i);let a=s.variant?s.variant:"regular";s.variant=a;const c=window.wp.customize?.control(t+"[variant]"),l=c&&"wpbf-enhanced-select"===c.params.type?c:void 0;if(l&&(void 0===n||"font-family"===n)){const e=function(t,e){const n=e["font-family"];if(!n)return[];const i=function(t){if(wpbfGoogleFonts)return wpbfGoogleFonts.items[t]?wpbfGoogleFonts.items[t]:void 0}(n),o=[];if(i){if(!wpbfFontVariantOptions)return o;let t=i.variants,e=0;for(;e<wpbfFontVariantOptions.complete.length;++e)t.includes(wpbfFontVariantOptions.complete[e].value)&&o.push({text:wpbfFontVariantOptions.complete[e].label,id:wpbfFontVariantOptions.complete[e].value})}else{let n=t.replace(/]/g,"");n=n.replace(/\[/g,"_");const i=wpbfFieldsFontVariants&&wpbfFieldsFontVariants[n]?wpbfFieldsFontVariants[n]:void 0;if(i&&"object"==typeof i)for(const t in i){if(!i.hasOwnProperty(t))continue;if(e["font-family"]!==t)continue;const n=i[t];if(!n.length)continue;let r=0;for(;r<n.length;++r)o.push({text:n[r].label,id:n[r].value})}else{if(o.length=0,!wpbfFontVariantOptions)return o;let t=0;for(;t<wpbfFontVariantOptions.standard.length;++t)o.push({text:wpbfFontVariantOptions.standard[t].label,id:wpbfFontVariantOptions.standard[t].value})}}return o}(t,s);e.length>1&&r.active()?l.activate():l.deactivate();a=function(t,e){return e.some(e=>e.id==t)}(a,e)?a:"regular";const n=l.container?.find(".wpbf-select2");n?.empty(),n?.append(e.map(t=>new Option(t.text,t.id,!1,!1))),n?.val(a),s.variant=a}-1!==a.indexOf("i")?s["font-style"]="italic":s["font-style"]="normal",s["font-weight"]="regular"===a||"italic"===a?400:W(a)?parseInt(a,10):400,r.setting.set(s)}wp.customize.controlConstructor["wpbf-repeater"]=wp.customize.Control.extend({ready:function(){const t=this;wp.customize.control.bind("removed",function e(n){t===n&&(t.destroy&&t.destroy(),t.container?.remove(),wp.customize.control.unbind("removed",e))}),this.initWpbfControl?.()},rows:[],currentIndex:0,repeaterFieldsContainer:void 0,settingField:void 0,repeaterTemplate:void 0,initWpbfControl:function(e){const n=e||this,i=n.params.value;n.settingField=n.container.find("[data-customize-setting-link]").first(),n.setValue?.([],!1),n.repeaterFieldsContainer=n.container.find(".repeater-fields").first(),n.currentIndex=0,n.rows=[];let o,r=!1;if("number"==typeof n.params.limit&&(r=!(0>=n.params.limit)&&n.params.limit),n.container?.on("click","button.repeater-add",t=>{t.preventDefault(),!r||"number"==typeof n.currentIndex&&n.currentIndex<r?(o=n.addRow?.(),o?.toggleMinimize(),n.initColorPicker?.(),o&&n.initSelect?.(o)):jQuery(n.selector+" .limit").addClass("highlight")}),n.container?.on("click",".repeater-row-remove",function(){"number"==typeof n.currentIndex&&n.currentIndex--,(!r||"number"==typeof n.currentIndex&&n.currentIndex<r)&&jQuery(n.selector+" .limit").removeClass("highlight")}),n.container?.on("click keypress",".repeater-field-image .upload-button,.repeater-field-cropped_image .upload-button,.repeater-field-upload .upload-button",function(t){t.preventDefault(),n.$thisButton=jQuery(this),n.openFrame?.(t)}),n.container?.on("click keypress",".repeater-field-image .remove-button,.repeater-field-cropped_image .remove-button",function(t){t.preventDefault(),n.$thisButton=jQuery(this),n.removeImage?.(t)}),n.container?.on("click keypress",".repeater-field-upload .remove-button",function(t){t.preventDefault(),n.$thisButton=jQuery(this),n.removeFile?.(t)}),n.repeaterTemplate=t.memoize(function(){const e={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(i){return t.template(n.container.find(".customize-control-repeater-content").first().html(),e)(i)}}),i.length){let t=0;for(t=0;t<i.length;t++)o=n.addRow?.(i[t]),n.initColorPicker?.(),o&&n.initSelect?.(o,i[t])}n.repeaterFieldsContainer?.sortable({handle:".repeater-row-header",update:function(){n.sort?.()}})},openFrame:function(t){wp.customize.utils.isKeydownButNotEnterEvent(t)||(this.$thisButton?.closest(".repeater-field").hasClass("repeater-field-cropped_image")?this.initCropperFrame?.():this.initFrame?.(),this.frame.open())},initFrame:function(){const t=this.getMimeType();this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:t}),multiple:!1,date:!1})]}),this.frame.on("select",this.onSelect,this)},initCropperFrame:function(){const e=this.$thisButton?.siblings("input.hidden-field").attr("data-field"),n=["width","height","flex_width","flex_height"],i=this.getMimeType();if(t.isString(e)&&""!==e&&t.isObject(this.params.fields[e])&&"cropped_image"===this.params.fields[e].type)for(const t of n)void 0!==this.params.fields[e][t]&&(this.params[t]=this.params.fields[e][t]);this.frame=wp.media({button:{text:"Select and Crop",close:!1},states:[new wp.media.controller.Library({library:wp.media.query({type:i}),multiple:!1,date:!1,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelectForCrop,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){const t=this.frame.state().get("selection").first().toJSON();this.$thisButton?.closest(".repeater-field").hasClass("repeater-field-upload")?this.setFileInRepeaterField?.(t):this.setImageInRepeaterField?.(t)},onSelectForCrop:function(){const t=this.frame.state().get("selection").first().toJSON();this.params.width!==t.width||this.params.height!==t.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):this.setImageInRepeaterField?.(t)},onCropped:function(t){this.setImageInRepeaterField?.(t)},calculateImageSelectOptions:function(t,e){const n=e.get("control"),i=!!parseInt(n.params.flex_width,10),o=!!parseInt(n.params.flex_height,10),r=t.get("width"),s=t.get("height");let a=parseInt(n.params.width,10),c=parseInt(n.params.height,10);const l=a/c,d=r,u=s;let p,f;e.set("canSkipCrop",!n.mustBeCropped(i,o,a,c,r,s)),d/u>l?(c=u,a=c*l):(a=d,c=a/l),p=(d-a)/2,f=(u-c)/2;const h={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:r,imageHeight:s,aspectRatio:"",maxHeight:!1,maxWidth:!1,x1:p,y1:f,x2:a+p,y2:c+f};return!1===o&&!1===i&&(h.aspectRatio=a+":"+c),!1===o&&(h.maxHeight=c),!1===i&&(h.maxWidth=a),h},mustBeCropped:function(t,e,n,i,o,r){return!(!0===t&&!0===e||!0===t&&i===r||!0===e&&n===o||n===o&&i===r||o<=n)},onSkippedCrop:function(){const t=this.frame.state().get("selection").first().toJSON();this.setImageInRepeaterField?.(t)},setImageInRepeaterField:function(t){const e=this.$thisButton?.closest(".repeater-field-image,.repeater-field-cropped_image");e?.find(".wpbf-image-attachment").html('<img src="'+t.url+'">').hide().slideDown("slow"),e?.find(".hidden-field").val(t.id),this.$thisButton?.text(this.$thisButton.data("alt-label")),e?.find(".remove-button").show(),e?.find("input, textarea, select").trigger("change"),this.frame.close()},setFileInRepeaterField:function(t){const e=this.$thisButton?.closest(".repeater-field-upload");e?.find(".wpbf-file-attachment").html('<span class="file"><span class="dashicons dashicons-media-default"></span> '+t.filename+"</span>").hide().slideDown("slow"),e?.find(".hidden-field").val(t.id),this.$thisButton?.text(this.$thisButton.data("alt-label")),e?.find(".upload-button").show(),e?.find(".remove-button").show(),e?.find("input, textarea, select").trigger("change"),this.frame.close()},getMimeType:function(){const e=this.$thisButton?.siblings("input.hidden-field").attr("data-field");return t.isString(e)&&""!==e&&t.isObject(this.params.fields[e])&&"upload"===this.params.fields[e].type&&void 0!==this.params.fields[e].mime_type?this.params.fields[e].mime_type:"image"},removeImage:function(t){if(wp.customize.utils.isKeydownButNotEnterEvent(t))return;const e=this.$thisButton?.closest(".repeater-field-image,.repeater-field-cropped_image,.repeater-field-upload"),n=e?.find(".upload-button");e?.find(".wpbf-image-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),e?.find(".hidden-field").val(""),n?.text(n.data("label")),this.$thisButton?.hide(),e?.find("input, textarea, select").trigger("change")},removeFile:function(t){if(wp.customize.utils.isKeydownButNotEnterEvent(t))return;const e=this.$thisButton?.closest(".repeater-field-upload"),n=e?.find(".upload-button");e?.find(".wpbf-file-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),e?.find(".hidden-field").val(""),n?.text(n.data("label")),this.$thisButton?.hide(),e?.find("input, textarea, select").trigger("change")},getValue:function(){const t=this.setting?.get(),e=void 0===t||"string"!=typeof t?"":t;return JSON.parse(decodeURI(e))},setValue:function(t,e,n){const i=t,o=[];if(n){for(const t in this.params.fields)this.params.fields.hasOwnProperty(t)&&this.params.fields[t].type&&["image","cropped_image","upload"].includes(this.params.fields[t].type)&&o.push(t);jQuery.each(t,function(t,e){jQuery.each(o,function(n,o){void 0!==e[o]&&void 0!==e[o].id&&(i[t][o]=e[o].id)})})}this.setting?.set(encodeURI(JSON.stringify(i))),e&&this.settingField?.trigger("change")},addRow:function(t){const e=this,n=this.getValue?.(),i={};let o=e.repeaterTemplate?.();if(o){let r=jQuery.extend(!0,{},e.params.fields);if(t){let e;for(e in t)t.hasOwnProperty(e)&&r.hasOwnProperty(e)&&(r[e].default=t[e])}o=o(r);const s=new Fe(e.currentIndex??0,jQuery(o).appendTo(e.repeaterFieldsContainer),e.params.rowLabel,e);let a;for(a in s.container.on("row:remove",function(t,n){e.deleteRow?.(n)}),s.container.on("row:update",function(t,n,i,o){e.updateField?.call(e,t,n,i,o),s.updateLabel?.()}),void 0!==this.currentIndex&&void 0!==this.rows&&(this.rows[this.currentIndex]=s),r)r.hasOwnProperty(a)&&(i[a]=r[a].default);return void 0!==n&&(void 0!==this.currentIndex&&(n[this.currentIndex]=i),this.setValue?.(n,!0)),void 0!==this.currentIndex&&this.currentIndex++,s}},sort:function(){const t=this;if(!t.getValue)return;const e=this.repeaterFieldsContainer?.find(".repeater-row"),n=[],i=t.getValue(),o=[],r=[];e?.each(function(t,e){n.push(jQuery(e).data("row"))}),jQuery.each(n,function(e,n){t.rows&&(o[e]=t.rows[n]),o[e].setRowIndex(e),r[e]=i[n]}),t.rows=o,t.setValue?.(r)},deleteRow:function(t){if(void 0===this.rows)return;if(!this.getValue)return;const e=this.getValue();if(e[t]){this.rows[t]&&(delete e[t],delete this.rows[t],this.setValue?.(e,!0))}for(let n in this.rows)this.rows.hasOwnProperty(n)&&this.rows[n]&&this.rows[n].updateLabel()},updateField:function(t,e,n,i){if(!this.getValue)return;if(void 0===this.rows||!this.rows[e])return;if(!this.params.fields[n])return;const o=this.params.fields[n].type,r=this.rows[e],s=this.getValue(),a=jQuery(i);void 0!==s[r.rowIndex][n]&&(s[r.rowIndex][n]="checkbox"===o?a.is(":checked"):a.val(),this.setValue?.(s,!0))},initColorPicker:function(){const e=this,n=e.container?.find(".wpbf-classic-color-picker"),i=n?.data("field"),o={};void 0!==i&&void 0!==e.params.fields[i]&&void 0!==e.params.fields[i].palettes&&t.isObject(e.params.fields[i].palettes)&&(o.palettes=e.params.fields[i].palettes),o.change=(t,n)=>{if(!e.getValue)return;const i=jQuery(t.target),o=i.closest(".repeater-row").data("row"),r=e.getValue(),s=n.color._alpha<1?n.color.to_s():n.color.toString();r[o][i.data("field")]=s,e.setValue?.(r,!0),setTimeout(function(){t.target.value=s},50)},n&&n.length>0&&n.wpColorPicker(o)},initSelect:function(t,e){const n=this,i=t.container.find(".repeater-field select");if(0===i.length)return;const o=i.data("field");(e=e||{})[o]=e[o]||"",jQuery(i).val(e[o]||jQuery(i).val()),this.container.on("change",".repeater-field select",function(t){if(!n.getValue)return;const e=jQuery(t.target),i=e.closest(".repeater-row").data("row"),o=n.getValue();o[i][e.data("field")]=jQuery(this).val(),n.setValue?.(o)})},destroy:function(){if(this.repeaterFieldsContainer?.data("ui-sortable")&&this.repeaterFieldsContainer.sortable("destroy"),this.container?.off(),this.frame&&(this.frame.off(),this.frame.dispose?.(),this.frame=void 0),this.container?.find(".wpbf-classic-color-picker").each(function(){const t=jQuery(this);t.data("wpColorPicker")&&t.wpColorPicker("destroy")}),this.rows){for(const t in this.rows){const e=this.rows[t];e&&(e.container?.off(),e.header?.off())}this.rows=[]}this.repeaterTemplate=void 0,this.settingField=void 0,this.repeaterFieldsContainer=void 0}}),window.wp.customize&&function(t){t.controlConstructor["wpbf-enhanced-select"]=t.Control.extend({initialize:function(e,n){const i=this;function o(e){i===e&&(i?.destroy?.(),i.container?.remove(),t.control.unbind("removed",o))}t.Control.prototype.initialize.call(i,e,n),t.control.bind("removed",o)},setNotificationContainer:function(t){this.notifications&&(this.notifications.container=jQuery(t),this.notifications.render())},renderContent:function(){if(!this.params)return;const t=this.params,e=`\n\t\t\t\t<label class="customize-control-title" for="wpbf-control-input-${this.id}">\n\t\t\t\t\t<span className="customize-control-title">${t.label}</span>\n\t\t\t\t</label>\n\t\t\t\t`,n=`\n\t\t\t\t<div class="customize-control-description description">\n\t\t\t\t\t${t.description}\n\t\t\t\t</div>\n\t\t\t\t`,i=`\n\t\t\t\t<header clas="wpbf-control-header">\n\t\t\t\t\t${t.label?e:""}\n\t\t\t\t\t${t.description?n:""}\n\t\t\t\t\t<div class="customize-control-notifications-container"></div>\n\t\t\t\t</header>\n\t\t\t\t`,o=`\n\t\t\t\t<div class="wpbf-control-form">\n\t\t\t\t\t<select class="wpbf-select2"${t.multiple?" multiple":""}></select>\n\t\t\t\t</div>\n\t\t\t\t`;let r=i+o;"horizontal"===t.layoutStyle&&(r=`\n\t\t\t\t\t<div class="wpbf-control-cols">\n\t\t\t\t\t\t<div class="wpbf-control-left-col wpbf-w50">\n\t\t\t\t\t\t\t${i}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="wpbf-control-right-col wpbf-flex wpbf-content-end wpbf-w50">\n\t\t\t\t\t\t\t${o}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t`),this.container?.html(r);const s=document.querySelector(`#customize-control-${this.id} .customize-control-notifications-container`);s&&s instanceof HTMLElement&&this.setNotificationContainer?.(s);const a=this.container?.find(".wpbf-select2");a?.on("change.select2",e=>{const n=a?.select2("data"),i=n?.map(t=>t.id);let o=null;o=i?.length?t.multiple?i:i[0]:t.multiple?[]:"",this.setting?.set(o)});const c=t.choicesGlobalVar;if(c&&c in window){const e=this.setting?.get(),n=Me(c,Array.isArray(e)?e:e?[e]:[]);n?a?.select2({placeholder:t.placeholder,allowClear:t.clearable,multiple:t.multiple,maximumSelectionLength:t.multiple?t.maxSelections:void 0,dataAdapter:n}):(console.warn("SharedFontDataAdapter creation failed, using default"),a?.select2({placeholder:t.placeholder,allowClear:t.clearable,multiple:t.multiple,maximumSelectionLength:t.multiple?t.maxSelections:void 0,data:window[c]??t.choices}))}else a?.select2({placeholder:t.placeholder,allowClear:t.clearable,multiple:t.multiple,maximumSelectionLength:t.multiple?t.maxSelections:void 0,data:t.choices})},ready:function(){this.setting?.bind(t=>{if(this.updateComponentState){let e=t;void 0===e&&(e=this.params?.multiple?[]:""),this.updateComponentState(e)}})},updateComponentState:function(t){const e=this.container?.find(".wpbf-select2");e?.val(t)},destroy:function(){const e=this.container?.find(".wpbf-select2");e?.off("change.select2"),e?.select2("destroy"),this.container?.html(""),t.Control.prototype.destroy&&t.Control.prototype.destroy.call(this)}})}(window.wp.customize),window.wp.customize&&(window.wp.customize.controlConstructor["wpbf-slider"]=function(t){return t.Control.extend({initialize:function(e,n){this.setNotificationContainer=this.setNotificationContainer?.bind(this),this.overrideUpdateComponentStateFn=this.overrideUpdateComponentStateFn?.bind(this),this.updateCustomizerSetting=this.updateCustomizerSetting?.bind(this),t.Control.prototype.initialize.call(this,e,n);const i=this;t.control.bind("removed",function e(n){i===n&&(i.destroy&&i.destroy(),i.container?.remove(),t.control.unbind("removed",e))})},setNotificationContainer:function(t){this.notifications&&(this.notifications.container=jQuery(t)),this.notifications?.render()},renderContent:function(){!this.root&&this.container&&(this.root=we.createRoot(this.container[0])),this.root?.render(e.jsx(De,{id:this.setting?.id??"",min:this.params?.min,max:this.params?.max,step:this.params?.step,label:this.params?.label,description:this.params?.description,default:this.params?.default,value:this.params?.value,updateCustomizerSetting:this.updateCustomizerSetting,overrideUpdateComponentStateFn:this.overrideUpdateComponentStateFn,setNotificationContainer:this.setNotificationContainer})),this.params?.allowCollapse&&this.container?.addClass("allowCollapse")},ready:function(){this.setting?.bind(t=>{this.updateComponentState?.(t)})},updateCustomizerSetting:function(t){void 0!==t&&this.setting?.set(t)},updateComponentState:function(t){},overrideUpdateComponentStateFn:function(t){this.updateComponentState=t},destroy:function(){this.root?.unmount(),this.root=void 0,t.Control.prototype.destroy?.call(this)}})}(window.wp.customize)),window.wp.customize&&(window.wp.customize.controlConstructor["wpbf-input-slider"]=function(t){return t.Control.extend({initialize:function(e,n){this.setNotificationContainer=this.setNotificationContainer?.bind(this),this.overrideUpdateComponentStateFn=this.overrideUpdateComponentStateFn?.bind(this),this.updateCustomizerSetting=this.updateCustomizerSetting?.bind(this),t.Control.prototype.initialize.call(this,e,n);const i=this;t.control.bind("removed",function e(n){i===n&&(i.destroy&&i.destroy(),i.container?.remove(),t.control.unbind("removed",e))})},setNotificationContainer:function(t){this.notifications&&(this.notifications.container=jQuery(t)),this.notifications?.render()},renderContent:function(){!this.root&&this.container&&(this.root=we.createRoot(this.container[0])),this.root?.render(e.jsx(Oe,{id:this.setting?.id??"",min:this.params?.min,max:this.params?.max,step:this.params?.step,label:this.params?.label,description:this.params?.description,default:this.params?.default??"",value:this.params?.value??"",setNotificationContainer:this.setNotificationContainer,overrideUpdateComponentStateFn:this.overrideUpdateComponentStateFn,updateCustomizerSetting:this.updateCustomizerSetting})),this.params?.allowCollapse&&this.container?.addClass("allowCollapse")},ready:function(){this.setting?.bind(t=>{this.updateComponentState?.(t)})},updateCustomizerSetting:function(t){void 0!==t&&this.setting?.set(t)},updateComponentState:function(t){},overrideUpdateComponentStateFn:function(t){this.updateComponentState=t},destroy:function(){this.root?.unmount(),this.root=void 0,t.Control.prototype.destroy?.call(this)}})}(window.wp.customize)),window.wp.customize&&(window.wp.customize.controlConstructor["wpbf-responsive-input-slider"]=function(t){return t.Control.extend({initialize:function(e,n){this.setNotificationContainer=this.setNotificationContainer?.bind(this),this.overrideUpdateComponentStateFn=this.overrideUpdateComponentStateFn?.bind(this),this.updateCustomizerSetting=this.updateCustomizerSetting?.bind(this),t.Control.prototype.initialize.call(this,e,n);const i=this;t.control.bind("removed",function e(n){i===n&&(i.destroy&&i.destroy(),i.container?.remove(),t.control.unbind("removed",e))})},setNotificationContainer:function(t){this.notifications&&(this.notifications.container=jQuery(t)),this.notifications?.render()},renderContent:function(){!this.root&&this.container&&(this.root=we.createRoot(this.container[0])),this.root?.render(e.jsx(Ae,{id:this.setting?.id??"",min:this.params?.min,max:this.params?.max,step:this.params?.step,label:this.params?.label,description:this.params?.description,default:this.params?.default??"",value:this.params?.value??"",overrideUpdateComponentStateFn:this.overrideUpdateComponentStateFn,updateCustomizerSetting:this.updateCustomizerSetting,setNotificationContainer:this.setNotificationContainer,devices:this.params?.devices,saveAsJson:this.params?.saveAsJson})),this.container?.addClass("allowCollapse")},ready:function(){this.setting?.bind(t=>{this.updateComponentState?.(t)})},updateCustomizerSetting:function(t){void 0!==t&&this.setting?.set(t)},updateComponentState:t=>{},overrideUpdateComponentStateFn:function(t){this.updateComponentState=t},destroy:function(){this.root?.unmount(),this.root=void 0,t.Control.prototype.destroy?.call(this)}})}(window.wp.customize)),wp.customize.controlConstructor["wpbf-sortable"]=wp.customize.Control.extend({ready:function(){const t=this;wp.customize.control.bind("removed",function e(n){t===n&&(t.destroy&&t.destroy(),t.container?.remove(),wp.customize.control.unbind("removed",e))}),jQuery(t.container.find("ul.sortable").first()).sortable({update:function(){t.setting&&t.setting.set(t.getNewValues())}}).disableSelection().find("li").each(function(){jQuery(this).find("i.visibility").on("click",function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).on("click",function(){t.setting?.set(t.getNewValues())})},getNewValues:function(){const e=this.container.find("li"),n=[];return t.each(e,function(t){t.classList.contains("invisible")||n.push(t.dataset.value)}),n},destroy:function(){const t=this.container?.find("ul.sortable");t?.data("ui-sortable")&&t.sortable("destroy"),this.container?.off()}}),window.wp.customize?.bind("ready",function(){window.wp.customize&&function(t){if(!Array.isArray(wpbfTypographyControlIds))return;wpbfTypographyControlIds.forEach(e=>{t.control(e)&&(window.wp.hooks.addAction("wpbf.dynamicControl.initWpbfControl","wpbf/typography/"+e,function(t){t.id}),t(e,function(t){Qe(e,void 0,void 0,void 0),t.bind(function(t){Qe(e,t,void 0,void 0)}),function(t){if(!Array.isArray(wpbfFontProperties))return;wpbfFontProperties.forEach(e=>{const n=`${t}[${e}]`;window.wp.customize?.control(n)&&window.wp.customize?.(n,function(n){n.bind(function(n){Qe(t,void 0,e,n)})})})}(e)}))})}(window.wp.customize)}),window.wp.customize&&(window.wp.customize.controlConstructor["wpbf-builder"]=window.wp.customize.wpbfDynamicControl.extend({isSaving:!1,form:void 0,draggableData:void 0,emptyWidgetItemMarkup:"<div class='widget-item empty-widget-item'>&nbsp;</div>",availableWidgetsPanel:void 0,builderPanel:void 0,initWpbfControl:function(t){(t=t||this)&&(t.setting?.bind(e=>{t.updateComponentState?.(e)}),t.buildAvailableWidgetsPanel?.(),t.buildBuilderPanel?.(),t.initDraggable?.(),t.initDroppable?.(),window.setTimeout(()=>{t.initSortable?.()},1))},isSortableEmpty:function(t){const e=this.findHtmlEls?.(t,".widget-item");if(!e||!e.length)return!0;for(let n=0;n<e.length;n++){const t=e[n];if(!t.classList.contains("empty-widget-item")&&!t.classList.contains("ui-sortable-placeholder")&&!t.classList.contains("ui-sortable-helper"))return!1}return!0},isWidgetActive:function(t){return!!this.params&&this.params.builder.activeWidgetKeys.includes(t)},findWidgetByKey:function(t){if(!this.params)return;const e=this.params.builder.availableWidgets;if(e.length)for(const n of e)if(n.key===t)return n},buildAvailableWidgetsPanel:function(){const t=this;if(!t.container)return;const e=t.params;if(!e)return;const n=t.findHtmlEl?.(t.container[0],".available-widgets-panel");if(!n)return;t.availableWidgetsPanel=n,jQuery(document.body).append('<div class="widget-drag-helper"></div>');const i=e.builder.availableWidgets,o=jQuery("<div></div>").addClass("builder-widgets available-widgets").appendTo(t.availableWidgetsPanel);i.forEach(e=>{const n=e.key;jQuery("<div></div>").addClass(`widget-item widget-item-${n} ${t.isWidgetActive?.(n)?"disabled":""}`).attr("data-widget-key",n).attr("draggable","true").html(`<span class="widget-label">${e.label}</span>`).on("click",function(n){t.handleWidgetClick?.(this,e)}).appendTo(o)})},buildBuilderPanel:function(){const t=this,e=t.params;if(!e)return;const n=e.builder.availableRows,i=e.builder.availableWidgets;if(!n||!i)return;const o=t.findHtmlEl?.("#customize-preview");if(!o)return;const r=jQuery("<div></div>").addClass(`wpbf-builder-panel ${e.id}-builder-panel`).attr("data-wpbf-builder-panel",e.id).insertAfter(o);n.forEach(n=>{const i=jQuery("<div></div>").addClass("builder-row").attr("data-row-key",n.key).appendTo(r),o=jQuery("<div></div>").addClass("builder-inner-row").appendTo(i);jQuery("<div></div>").addClass("row-label").attr("data-row-key",n.key).text(n.label).appendTo(i),jQuery("<button></button>").addClass("row-setting-button").attr("data-row-key",n.key).html('<i class="dashicons dashicons-admin-generic"></i>').on("click",()=>t.handleRowSettingClick?.(n.key)).appendTo(i);const s=e.value[n.key];n.columns.forEach((e,i)=>{let r="";e.key.endsWith("_start")?r="wpbf-content-start":e.key.endsWith("_end")?r="wpbf-content-end":0!==i&&i!==n.columns.length-1&&(r="wpbf-content-center column-middle"),0===i?r+=" column-start wpbf-content-start":i===n.columns.length-1&&(r+=" column-end wpbf-content-end");const a=jQuery("<div></div>").addClass(`builder-widgets builder-column sortable-widgets wpbf-flex ${r}`).attr("data-column-key",e.key).appendTo(o),c="empty-widget-list";if(!s||!Object.keys(s).length)return a.addClass(c),void a.html(t.emptyWidgetItemMarkup??"");const l=s[e.key];if(!l||!l.length)return a.addClass(c),void a.html(t.emptyWidgetItemMarkup??"");l.forEach(e=>{const n=t.createWidgetItem?.(e,!0);n&&a.append(n)})}),t.bindCustomizeSection?.(n.key)}),t.builderPanel=r[0]},handleRowSettingClick:function(t){const e=this.params?.id;e&&window.wp.customize?.section(`${e}_${t}_section`,function(t){t.expand(t.params)})},bindCustomizeSection:function(t){const e=this.params?.id;e&&window.wp.customize?.section(`${e}_${t}_section`,function(e){e.expanded.bind(function(e){const n=document.querySelector(`.builder-row[data-row-key="${t}"]`);n&&(e?n.classList.add("is-active"):n.classList.remove("is-active"))})})},handleWidgetClick:function(t,e){if(!t.classList.contains("ui-sortable-handle")&&!t.classList.contains("disabled"))return;if(!e.section)return;const n=window.wp.customize?.section(e.section);n&&n.params&&n.expand(n.params)},initDraggable:function(){const t=this;if(!t.params)return;if(!t.availableWidgetsPanel||!t.builderPanel)return;const e=t.findHtmlEl?.(".widget-drag-helper");if(!e)return;const n=t.findHtmlEls?.(t.availableWidgetsPanel,".widget-item");n&&n.length&&n.forEach(n=>{n instanceof HTMLElement&&(n.addEventListener("dragstart",function(i){if(!(i instanceof DragEvent))return;document.body.classList.add("is-dragging-widget"),n.classList.add("is-dragging"),e.classList.add("is-shown");const o=n.dataset.widgetKey;if(!o)return;t.draggableData={widgetKey:o},i.dataTransfer?.setData("text",JSON.stringify({widgetKey:o})),e.innerHTML=n.outerHTML;const r=n.getBoundingClientRect(),s=r.left,a=r.top;e.style.left=s+"px",e.style.top=a+"px";const c=t.findHtmlEl?.(e,".widget-item"),l=c?.getBoundingClientRect(),d=l?.width||80;e.style.width=d+"px",i.dataTransfer?.setDragImage(e,0,0),window.setTimeout(()=>{e.classList.remove("is-shown")},10)}),n.addEventListener("dragend",function(i){i instanceof DragEvent&&(i.preventDefault(),n.classList.remove("is-dragging"),document.body.classList.remove("is-dragging-widget"),e.classList.remove("is-shown"),e.innerHTML="",e.removeAttribute("style"),t.draggableData=void 0)}))})},initDroppable:function(){const t=this;if(!t.params)return;if(!t.availableWidgetsPanel||!t.builderPanel)return;const e=t.findHtmlEls?.(t.builderPanel,".builder-column");e&&e.length&&e.forEach(e=>{e.addEventListener("dragenter",function(t){t instanceof DragEvent&&(t.preventDefault(),e.classList.add("dragover"))}),e.addEventListener("dragover",function(t){t.preventDefault()}),e.addEventListener("dragleave",function(t){t instanceof DragEvent&&(t.preventDefault(),e.classList.remove("dragover"))}),e.addEventListener("drop",function(n){if(!(n instanceof DragEvent))return;n.preventDefault(),e.classList.remove("dragover");const i=t.getWidgetItemFromDraggableData?.(n);if(!i)return;const o=i.dataset.widgetKey;if(!o)return;const r=t.createWidgetItem?.(o,!0);if(!r)return;const s=e.querySelector(".ui-sortable-placeholder.from-available-widgets");s&&e.removeChild(s),e.classList.contains("column-end")?e.insertBefore(r,e.firstChild):e.appendChild(r);const a=e.querySelector(".empty-widget-item");a&&a.remove(),jQuery(e).sortable("refresh"),i.classList.add("disabled"),t.draggableData=void 0,t.updateCustomizerSetting?.()})})},parseDraggableData:function(t){const e=t.dataTransfer?.getData("text");if(!e)return;let n;try{n=JSON.parse(e)}catch(i){console.error("Error parsing JSON data:",i)}return n||void 0},getWidgetItemFromDraggableData:function(t){const e=t.dataTransfer?.getData("text");if(!e)return;const n=this.parseDraggableData?.(t);if(!n)return;const i=n.widgetKey;if(!i)return;const o=this.findHtmlEl?.(this.availableWidgetsPanel,`.widget-item[data-widget-key="${i}"]`);return o},createWidgetItem:function(t,e){const n=this,i=n.findWidgetByKey?.(t);if(!i)return;const o=n.findHtmlEl?.(n.availableWidgetsPanel,`.widget-item[data-widget-key="${t}"]`);if(!o)return;const r=o.cloneNode(!0);if(r instanceof HTMLElement){if(r.classList.remove("disabled"),r.classList.remove("is-dragging"),r.removeAttribute("draggable"),e){const t=document.createElement("button");t.type="button",t.className="widget-button delete-widget-button",t.innerHTML='<i class="dashicons dashicons-no-alt"></i>',r.appendChild(t),t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),n.handleDeleteActiveWidget?.(r,o)}),r.addEventListener("click",function(t){t.preventDefault(),n.handleWidgetClick?.(this,i)})}return r}},initSortable:function(){const t=this;if(!t.params)return;if(!t.availableWidgetsPanel||!t.builderPanel)return;const e=jQuery(t.builderPanel),n=e.find(".sortable-widgets"),i=e.find(".builder-column");n.sortable({connectWith:i,placeholder:"widget-item",start:function(e,n){document.body.classList.add("is-sorting-widget");const i=t.findHtmlEl?.(n.item[0],".widget-label");i&&n.placeholder[0].appendChild(i.cloneNode(!0))},update:function(e,n){const i=e.target;i instanceof HTMLElement&&(t.checkSortableContent?.(i),t.updateCustomizerSetting?.())},stop:function(t,e){document.body.classList.remove("is-sorting-widget")}}),e.find(".builder-column.column-middle").on("sortover",function(t,e){t.target.classList.remove("empty-widget-list")}),e.find(".builder-column.column-middle").on("sortout",function(e,n){t.checkSortableContent?.(e.target)})},handleDeleteActiveWidget:function(t,e){const n=this;e?.classList.remove("disabled");const i=t.closest(".sortable-widgets");t.remove(),i instanceof HTMLElement&&n.checkSortableContent?.(i),i&&jQuery(i).sortable("refresh"),n.updateCustomizerSetting?.()},checkSortableContent:function(t){const e="empty-widget-list",n=t.querySelector(".empty-widget-item");this.isSortableEmpty?.(t)?(t.classList.add(e),n||jQuery(t).append(this.emptyWidgetItemMarkup??"")):(t.classList.remove(e),n&&n.remove())},destroySortable:function(){this.availableWidgetsPanel&&this.builderPanel&&jQuery(".builder-column").sortable("destroy")},updateCustomizerSetting:function(){const t=this;t.isSaving||(t.isSaving=!0,setTimeout(()=>{const e=t.findHtmlEls?.(t.builderPanel,".builder-row");if(!e||!e.length)return void(t.isSaving=!1);const n={};e.forEach(e=>{const i=e.dataset.rowKey;if(!i)return;n[i]={};const o=t.findHtmlEls?.(e,".builder-column.sortable-widgets");o&&o.length&&o.forEach(e=>{const o=e.dataset.columnKey;if(!o)return;n[i][o]=[];const r=t.findHtmlEls?.(e,".widget-item");r&&r.length&&r.forEach(t=>{if(t.classList.contains("empty-widget-item"))return;if(t.classList.contains("ui-sortable-placeholder"))return;const e=t.dataset.widgetKey;e&&n[i][o].push(e)})})}),t.setting?.set(n),t.isSaving=!1},1))},updateComponentState:function(t){}})),function(t){const e=["desktop","mobile"];t&&(t.controlConstructor["wpbf-responsive-builder"]=t.wpbfDynamicControl.extend({isSaving:!1,draggableData:void 0,emptyWidgetItemMarkup:"<div class='widget-item empty-widget-item'>&nbsp;</div>",availableWidgetsPanels:{desktop:void 0,mobile:void 0},builderPanel:void 0,initWpbfControl:function(t){const e=t??this;e&&(e.setting?.bind(t=>{e.updateComponentState?.(t)}),e.buildAvailableWidgetsPanel?.(),e.buildBuilderPanel?.(),e.initDraggable?.(),e.initDroppable?.(),window.setTimeout(()=>{e.initSortable?.()},1))},isSortableEmpty:function(t){const e=this.findHtmlEls?.(t,".widget-item");if(!e||!e.length)return!0;for(let n=0;n<e.length;n++){const t=e[n];if(!t.classList.contains("empty-widget-item")&&(!t.classList.contains("ui-sortable-placeholder")&&!t.classList.contains("ui-sortable-helper")))return!1}return!0},isWidgetActive:function(t,e){if(!this.params||!e||"desktop"!==e&&"mobile"!==e)return!1;const n=this.params.builder[e].activeWidgetKeys;return!!n.length&&n.includes(t)},findWidgetByKey:function(t,e){if(!this.params||!e||"desktop"!==e&&"mobile"!==e)return;const n=this.params.builder[e].availableWidgets;if(n.length)for(const i of n)if(i.key===t)return i},buildAvailableWidgetsPanel:function(){if(!this.container)return;const t=this.params;if(!t)return;const e=this.findHtmlEl?.(this.container[0],".wpbf-control-form");if(!e)return;const n=this;if(this.availableWidgetsPanels){for(const i in t.builder){if(!t.builder.hasOwnProperty(i))continue;if("desktop"!==i&&"mobile"!==i)continue;if(!t.builder[i].availableWidgets.length)continue;const o=jQuery("<div></div>").addClass("available-widgets-panel").attr("data-device",i).appendTo(e);this.availableWidgetsPanels[i]=o[0];const r=jQuery("<div></div>").addClass("builder-widgets available-widgets").appendTo(this.availableWidgetsPanels[i]);t.builder[i].availableWidgets.forEach(t=>{const e=t.key;jQuery("<div></div>").addClass(`widget-item widget-item-${e} ${n.isWidgetActive?.(e,i)?"disabled":""}`).attr("data-widget-key",e).attr("draggable","true").html(`<span class="widget-label">${t.label}</span>`).on("click",function(e){n.handleWidgetClick?.(this,t)}).appendTo(r)})}jQuery(document.body).append('<div class="widget-drag-helper"></div>')}},buildBuilderPanel:function(){const t=this,e=t.params;if(!e)return;const n=t.findHtmlEl?.("#customize-preview");if(!n)return;const i=jQuery("<div></div>").addClass(`wpbf-builder-panel ${e.id}-builder-panel`).attr("data-wpbf-builder-panel",e.id).insertAfter(n),o="empty-widget-list";for(const r in e.builder){if(!e.builder.hasOwnProperty(r))continue;if("desktop"!==r&&"mobile"!==r)continue;if(!e.builder[r].availableWidgets.length)continue;const n=jQuery("<div></div>").addClass("wpbf-builder-slots").attr("data-device",r).appendTo(i);if(!e.builder[r].availableWidgets.length)return;let s;if(e.builder[r].availableSlots.offcanvas){n.addClass("wpbf-flex wpbf-content-center");const i=jQuery("<div></div>").addClass("builder-offcanvas").appendTo(n),o="desktop"===r&&!e.isPremium;o&&i.addClass("wpbf-premium-locked");const a=jQuery("<div></div>").addClass("builder-inner-offcanvas sortable-group").appendTo(i);jQuery("<button></button>").attr("type","button").addClass("row-setting-button").html(`<i class="dashicons dashicons-admin-generic"></i><span class="button-label">${e.builder[r].availableSlots.offcanvas.label}</span>`).on("click",()=>t.handleRowSettingClick?.(e.builder[r].availableSlots.offcanvas.key)).appendTo(a);const c=jQuery("<div></div>").addClass("builder-widgets active-widgets dotted-border").appendTo(a);o&&(c.addClass("wpbf-premium-locked-dropzone"),jQuery("<div></div>").addClass("wpbf-premium-overlay").html('<div class="wpbf-premium-overlay-content">\n\t\t\t\t\t\t\t\t\t\t<span class="dashicons dashicons-lock"></span>\n\t\t\t\t\t\t\t\t\t\t<p>Premium Feature</p>\n\t\t\t\t\t\t\t\t\t</div>').appendTo(c)),e.value&&!o&&e.value[r].offcanvas?.forEach(e=>{const n=t.createWidgetItem?.(e,!0,r);n&&c.append(n)}),s=jQuery("<div></div>").addClass("builder-rows").appendTo(n)}const a=e.builder[r].availableSlots;if(!a.rows.length)continue;const c=s||n;a.rows.forEach(n=>{const i=jQuery("<div></div>").addClass("builder-row sortable-group").attr("data-row-key",n.key).appendTo(c),s=jQuery("<div></div>").addClass("builder-inner-row dotted-border").appendTo(i);jQuery("<div></div>").addClass("row-label").attr("data-row-key",n.key).text(n.label).appendTo(i),jQuery("<button></button>").addClass("row-setting-button").attr("type","button").attr("data-row-key",n.key).html('<i class="dashicons dashicons-admin-generic"></i>').on("click",()=>t.handleRowSettingClick?.(n.key)).appendTo(i);const a=e.value?e.value[r].rows[n.key]:void 0;n.columns.forEach((e,i)=>{let c="";e.key.endsWith("_start")?c="wpbf-content-start":e.key.endsWith("_end")?c="wpbf-content-end":0!==i&&i!==n.columns.length-1&&(c="wpbf-content-center column-middle"),0===i?c+=" column-start wpbf-content-start":i===n.columns.length-1&&(c+=" column-end wpbf-content-end");const l=jQuery("<div></div>").addClass(`builder-column builder-widgets active-widgets wpbf-flex ${c}`).attr("data-column-key",e.key).appendTo(s);if(!a||!Object.keys(a).length)return l.addClass(o),void l.html(t.emptyWidgetItemMarkup??"");const d=a[e.key];if(!d||!d.length)return l.addClass(o),void l.html(t.emptyWidgetItemMarkup??"");d.forEach(e=>{const n=t.createWidgetItem?.(e,!0,r);n&&l.append(n)})}),t.bindCustomizeSection?.(n.key)})}t.builderPanel=i[0]},handleRowSettingClick:function(e){const n=this.params?.id;n&&t?.section(`${n}_${e}_section`,function(t){t.expand(t.params)})},openWidgetSettings:function(e,n){if(!e||!n)return;const i=this.findWidgetByKey?.(e,n);if(!i||!i.section)return;const o=t?.section(i.section);o&&o.params&&o.expand(o.params)},bindCustomizeSection:function(e){const n=this.params?.id;n&&t?.section(`${n}_${e}_section`,function(t){t.expanded.bind(function(t){const n=document.querySelector(`.builder-row[data-row-key="${e}"]`);n&&(t?n.classList.add("is-active"):n.classList.remove("is-active"))})})},handleWidgetClick:function(e,n){if(!e.classList.contains("ui-sortable-handle")&&!e.classList.contains("disabled"))return;if(!n.section)return;const i=t?.section(n.section);i&&i.params&&i.expand(i.params)},initDraggable:function(){if(!this.params||!this.container||!this.builderPanel)return;const t=this.findHtmlEl?.(".widget-drag-helper");if(!t)return;const e=this.findHtmlEls?.(this.container[0],".widget-item");if(!e||!e.length)return;const n=this;e.forEach(e=>{e instanceof HTMLElement&&(e.addEventListener("dragstart",i=>{if(!(i instanceof DragEvent))return;document.body.classList.add("is-dragging-widget"),e.classList.add("is-dragging"),t.classList.add("is-shown");const o=e.dataset.widgetKey;if(!o)return;n.draggableData={widgetKey:o},i.dataTransfer?.setData("text",JSON.stringify({widgetKey:o})),t.innerHTML=e.outerHTML;const r=e.getBoundingClientRect(),s=r.left,a=r.top;t.style.left=s+"px",t.style.top=a+"px";const c=n.findHtmlEl?.(t,".widget-item"),l=c?.getBoundingClientRect(),d=l?.width||80;t.style.width=d+"px",i.dataTransfer?.setDragImage(t,0,0),window.setTimeout(()=>{t.classList.remove("is-shown")},10)}),e.addEventListener("dragend",i=>{i instanceof DragEvent&&(i.preventDefault(),e.classList.remove("is-dragging"),document.body.classList.remove("is-dragging-widget"),t.classList.remove("is-shown"),t.innerHTML="",t.removeAttribute("style"),n.draggableData=void 0)}))})},initDroppable:function(){if(!this.builderPanel)return;const t=this.findHtmlEls?.(this.builderPanel,".active-widgets");if(!t||!t.length)return;const e=this;t.forEach(t=>{const n=t.classList.contains("wpbf-premium-locked-dropzone");t.addEventListener("dragenter",e=>{e instanceof DragEvent&&(e.preventDefault(),n||t.classList.add("dragover"))}),t.addEventListener("dragover",t=>{t.preventDefault()}),t.addEventListener("dragleave",e=>{e instanceof DragEvent&&(e.preventDefault(),t.classList.remove("dragover"))}),t.addEventListener("drop",i=>{if(!(i instanceof DragEvent))return;if(i.preventDefault(),t.classList.remove("dragover"),n)return;const o=e.getWidgetItemFromDraggableData?.(i);if(!o)return;const r=o.dataset.widgetKey;if(!r)return;const s=t.closest(".wpbf-builder-slots");if(!(s instanceof HTMLElement))return;const a=s.dataset.device;if(!a||"desktop"!==a&&"mobile"!==a)return;const c=e.createWidgetItem?.(r,!0,a);if(!c)return;const l=t.querySelector(".ui-sortable-placeholder.from-available-widgets");l&&t.removeChild(l),t.classList.contains("column-end")?t.insertBefore(c,t.firstChild):t.appendChild(c);const d=t.querySelector(".empty-widget-item");d&&d.remove(),jQuery(t).sortable("refresh"),o.classList.add("disabled"),e.draggableData=void 0,e.updateCustomizerSetting?.(),window.setTimeout(()=>{e.openWidgetSettings?.(r,a)},300)})})},parseDraggableData:function(t){const e=t.dataTransfer?.getData("text");if(!e)return;let n;try{n=JSON.parse(e)}catch(i){console.error("Error parsing JSON data:",i)}return n||void 0},getWidgetItemFromDraggableData:function(t){const e=t.dataTransfer?.getData("text");if(!e)return;if(!this.container)return;const n=this.parseDraggableData?.(t);if(!n)return;const i=n.widgetKey;if(!i)return;const o=this.findHtmlEl?.(this.container[0],`.widget-item[data-widget-key="${i}"]`);return o},createWidgetItem:function(t,e,n){if(!this.container)return;const i=this.findWidgetByKey?.(t,n);if(!i)return;const o=this,r=this.findHtmlEl?.(this.container[0],`.widget-item[data-widget-key="${t}"]`);if(!r)return;const s=r.cloneNode(!0);if(s instanceof HTMLElement){if(s.classList.remove("disabled"),s.classList.remove("is-dragging"),s.removeAttribute("draggable"),e){const t=document.createElement("button");t.type="button",t.className="widget-button delete-widget-button",t.innerHTML='<i class="dashicons dashicons-no-alt"></i>',s.appendChild(t),t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),o.handleDeleteActiveWidget?.(s,r)}),s.addEventListener("click",function(t){t.preventDefault(),o.handleWidgetClick?.(this,i)})}return s}},initSortable:function(){const t=this;if(!this.builderPanel)return;const e=jQuery(this.builderPanel),n=e.find(".active-widgets:not(.wpbf-premium-locked-dropzone)");n.sortable({connectWith:n,placeholder:"widget-item",start:function(e,n){document.body.classList.add("is-sorting-widget");const i=t.findHtmlEl?.(n.item[0],".widget-label");i&&n.placeholder[0].appendChild(i.cloneNode(!0))},update:function(e,n){const i=e.target;i instanceof HTMLElement&&(t.checkSortableContent?.(i),t.updateCustomizerSetting?.())},stop:function(t,e){document.body.classList.remove("is-sorting-widget")}}),e.find(".builder-column.column-middle").on("sortover",function(t,e){t.target.classList.remove("empty-widget-list")}),e.find(".builder-column.column-middle").on("sortout",function(e,n){t.checkSortableContent?.(e.target)})},handleDeleteActiveWidget:function(t,e){const n=this;e?.classList.remove("disabled");const i=t.closest(".active-widgets");t.remove(),i instanceof HTMLElement&&n.checkSortableContent?.(i),i&&jQuery(i).sortable("refresh"),n.updateCustomizerSetting?.()},checkSortableContent:function(t){const e="empty-widget-list",n=t.querySelector(".empty-widget-item");this.isSortableEmpty?.(t)?(t.classList.add(e),n||jQuery(t).append(this.emptyWidgetItemMarkup??"")):(t.classList.remove(e),n&&n.remove())},destroySortable:function(){this.builderPanel&&jQuery(".wpbf-builder-panel .active-widgets").sortable("destroy")},updateCustomizerSetting:function(){this.isSaving||(this.isSaving=!0,setTimeout(()=>{if(!this.availableWidgetsPanels)return;const t={desktop:{offcanvas:[],rows:{}},mobile:{offcanvas:[],rows:{}}};for(const n of e){if("desktop"!==n&&"mobile"!==n)continue;const e=this.findHtmlEl?.(this.builderPanel,`.wpbf-builder-slots[data-device="${n}"]`);if(!e)return;const i=this.findHtmlEl?.(e,".builder-offcanvas .active-widgets"),o=this.findHtmlEls?.(i,".widget-item");o?.forEach(e=>{if(e.classList.contains("empty-widget-item"))return;if(e.classList.contains("ui-sortable-placeholder"))return;const i=e.dataset.widgetKey;i&&(t[n].offcanvas||(t[n].offcanvas=[]),t[n].offcanvas.push(i))});const r=this.findHtmlEls?.(e,".builder-row");r&&r.length&&r.forEach(e=>{const i=e.dataset.rowKey;if(!i)return;const o=this.findHtmlEls?.(e,".active-widgets");o&&o.length&&(t[n].rows[i]={},o.forEach(e=>{const o=e.dataset.columnKey;if(!o)return;t[n].rows[i][o]=[];const r=this.findHtmlEls?.(e,".widget-item");r&&r.length&&r.forEach(e=>{if(e.classList.contains("empty-widget-item"))return;if(e.classList.contains("ui-sortable-placeholder"))return;const r=e.dataset.widgetKey;r&&t[n].rows[i][o].push(r)})}))})}this.setting?.set(t),this.isSaving=!1},1))},updateComponentState:function(t){}}))}(window.wp.customize)}(_,ReactJSXRuntime,React,ReactDOM,jQuery);
//# sourceMappingURL=controls-bundle-min.js.map
