!function(){function e(e){return e&&e.__esModule?e.default:e}var t={};t=_,wp.customize.controlConstructor["wpbf-image"]=wp.customize.wpbfDynamicControl.extend({initWpbfControl:function(i){let s=(i=i||this).params,n=s.saveAs,l=s.defaultSrc,d=s.valueSrc,a=i.container[0].querySelector(".attachment-media-view"),r=a?.querySelector(".thumbnail")??null,u=a?.querySelector(".button-add-media")??null,c=a?.querySelector(".change-button")??null,o=a?.querySelector(".remove-button")??null,m=a?.querySelector(".default-button")??null;L();let h=d.url;function f(){let s=wp.media({multiple:!1}).open().on("select",function(){let l=s.state().get("selection").first().toJSON();d.id=l.id,d.url=l.url,d.width=l.width,d.height=l.height,h=l.url,e(t).isUndefined(l.sizes)||(d.url=l.sizes.full.url,h=l.sizes.full.url,e(t).isUndefined(l.sizes.medium)?e(t).isUndefined(l.sizes.thumbnail)||(h=l.sizes.thumbnail.url):h=l.sizes.medium.url),"array"===n?i.setting.set(d):"id"===n?i.setting.set(d.id):"url"===n&&i.setting.set(d.url),r&&(r.innerHTML='<img class="attachment-thumb" src="'+h+'" alt="" />'),L()})}function L(){d.url?(r&&r.classList.remove("hidden"),o&&o.classList.remove("hidden"),u&&u.classList.add("hidden"),c&&c.classList.remove("hidden")):(r&&r.classList.add("hidden"),o&&o.classList.add("hidden"),u&&u.classList.remove("hidden"),c&&c.classList.add("hidden")),d.id===l.id?m&&m.classList.add("hidden"):m&&m.classList.remove("hidden")}r&&h&&(r.innerHTML='<img class="attachment-thumb" src="'+h+'" alt="" />'),u?.addEventListener("click",f),c?.addEventListener("click",f),o?.addEventListener("click",function(){d.id=0,d.url="",d.width=0,d.height=0,"array"===n?i.setting.set(d):"id"===n?i.setting.set(0):"url"===n&&i.setting.set(""),r&&(r.innerHTML=wp.i18n.__("No image selected","wpbf")),L()}),m?.addEventListener("click",function(){i.setting.set(l),r&&(r.innerHTML='<img class="attachment-thumb" src="'+i.params.default+'" alt="" />'),L()})}})}();